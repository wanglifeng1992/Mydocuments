<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=us-ascii">
<meta name=Generator content="Microsoft Word 12 (filtered)">
<title>&#31532;1&#31456; &#24320;&#21457;&#24037;&#20855;&#25351;&#21335;</title>

<style id="dynCom" type="text/css"><!-- --></style>
<script language="JavaScript"><!--
function msoCommentShow(anchor_id, com_id)
{
	if(msoBrowserCheck()) 
		{
		c = document.all(com_id);
		a = document.all(anchor_id);
		if (null != c && null == c.length && null != a && null == a.length)
			{
			var cw = c.offsetWidth;
			var ch = c.offsetHeight;
			var aw = a.offsetWidth;
			var ah = a.offsetHeight;
			var x  = a.offsetLeft;
			var y  = a.offsetTop;
			var el = a;
			while (el.tagName != "BODY") 
				{
				el = el.offsetParent;
				x = x + el.offsetLeft;
				y = y + el.offsetTop;
				}
			var bw = document.body.clientWidth;
			var bh = document.body.clientHeight;
			var bsl = document.body.scrollLeft;
			var bst = document.body.scrollTop;
			if (x + cw + ah / 2 > bw + bsl && x + aw - ah / 2 - cw >= bsl ) 
				{ c.style.left = x + aw - ah / 2 - cw; }
			else 
				{ c.style.left = x + ah / 2; }
			if (y + ch + ah / 2 > bh + bst && y + ah / 2 - ch >= bst ) 
				{ c.style.top = y + ah / 2 - ch; }
			else 
				{ c.style.top = y + ah / 2; }
			c.style.visibility = "visible";
}	}	}
function msoCommentHide(com_id) 
{
	if(msoBrowserCheck())
		{
		c = document.all(com_id);
		if (null != c && null == c.length)
		{
		c.style.visibility = "hidden";
		c.style.left = -1000;
		c.style.top = -1000;
		} } 
}
function msoBrowserCheck()
{
	ms = navigator.appVersion.indexOf("MSIE");
	vers = navigator.appVersion.substring(ms + 5, ms + 6);
	ie4 = (ms > 0) && (parseInt(vers) >= 4);
	return ie4;
}
if (msoBrowserCheck())
{
	document.styleSheets.dynCom.addRule(".msocomanchor","background: infobackground");
	document.styleSheets.dynCom.addRule(".msocomoff","display: none");
	document.styleSheets.dynCom.addRule(".msocomtxt","visibility: hidden");
	document.styleSheets.dynCom.addRule(".msocomtxt","position: absolute");
	document.styleSheets.dynCom.addRule(".msocomtxt","top: -1000");
	document.styleSheets.dynCom.addRule(".msocomtxt","left: -1000");
	document.styleSheets.dynCom.addRule(".msocomtxt","width: 33%");
	document.styleSheets.dynCom.addRule(".msocomtxt","background: infobackground");
	document.styleSheets.dynCom.addRule(".msocomtxt","color: infotext");
	document.styleSheets.dynCom.addRule(".msocomtxt","border-top: 1pt solid threedlightshadow");
	document.styleSheets.dynCom.addRule(".msocomtxt","border-right: 2pt solid threedshadow");
	document.styleSheets.dynCom.addRule(".msocomtxt","border-bottom: 2pt solid threedshadow");
	document.styleSheets.dynCom.addRule(".msocomtxt","border-left: 1pt solid threedlightshadow");
	document.styleSheets.dynCom.addRule(".msocomtxt","padding: 3pt 3pt 3pt 3pt");
	document.styleSheets.dynCom.addRule(".msocomtxt","z-index: 100");
}
// --></script>
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:SimSun;
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:SimHei;
	panose-1:2 1 6 9 6 1 1 1 1 1;}
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:"Arial Unicode MS";
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:KaiTi_GB2312;}
@font-face
	{font-family:"Lucida Console";
	panose-1:2 11 6 9 4 5 4 2 2 4;}
@font-face
	{font-family:NSimSun;
	panose-1:2 1 6 9 3 1 1 1 1 1;}
@font-face
	{font-family:"\@Arial Unicode MS";
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:SimSun;
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:NSimSun;
	panose-1:2 1 6 9 3 1 1 1 1 1;}
@font-face
	{font-family:SimHei;
	panose-1:2 1 6 9 6 1 1 1 1 1;}
@font-face
	{font-family:KaiTi_GB2312;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:10.0pt;
	punctuation-trim:leading;
	font-size:10.0pt;
	font-family:"Times New Roman","serif";}
h1
	{mso-style-link:"\6807\9898 1 Char";
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:center;
	text-indent:10.0pt;
	punctuation-trim:leading;
	font-size:18.0pt;
	font-family:"Arial","sans-serif";
	font-weight:normal;}
h2
	{mso-style-link:"\6807\9898 2 Char";
	margin:0cm;
	margin-bottom:.0001pt;
	page-break-after:avoid;
	punctuation-trim:none;
	font-size:14.0pt;
	font-family:"Arial","sans-serif";
	font-weight:normal;}
h3
	{mso-style-link:"\6807\9898 3 Char";
	margin:0cm;
	margin-bottom:.0001pt;
	page-break-after:avoid;
	punctuation-trim:none;
	font-size:12.0pt;
	font-family:"Arial","sans-serif";
	font-weight:normal;}
h4
	{mso-style-link:"\6807\9898 4 Char";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:10.0pt;
	margin-bottom:.0001pt;
	layout-grid-mode:char;
	punctuation-trim:none;
	font-size:10.0pt;
	font-family:"Arial","sans-serif";
	font-weight:normal;}
h5
	{mso-style-name:"\6807\9898 5\,\56FE\9898";
	mso-style-link:"\6807\9898 5 Char\,\56FE\9898 Char";
	margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:10.0pt;
	page-break-after:avoid;
	punctuation-trim:leading;
	font-size:10.0pt;
	font-family:"Arial","sans-serif";
	font-weight:normal;}
p.MsoHeading7, li.MsoHeading7, div.MsoHeading7
	{mso-style-link:"\6807\9898 7 Char";
	margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	text-align:justify;
	text-justify:inter-ideograph;
	page-break-after:avoid;
	punctuation-trim:leading;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";
	font-weight:bold;}
p.MsoHeading9, li.MsoHeading9, div.MsoHeading9
	{mso-style-link:"\6807\9898 9 Char";
	margin-top:3.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:0cm;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:10.0pt;
	line-height:150%;
	page-break-after:avoid;
	punctuation-trim:leading;
	font-size:10.0pt;
	font-family:"Times New Roman","serif";
	font-weight:bold;}
p.MsoToc1, li.MsoToc1, div.MsoToc1
	{margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	text-indent:10.0pt;
	punctuation-trim:leading;
	font-size:10.0pt;
	font-family:"Times New Roman","serif";
	text-transform:uppercase;
	font-weight:bold;}
p.MsoToc2, li.MsoToc2, div.MsoToc2
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:10.5pt;
	margin-bottom:.0001pt;
	text-indent:10.0pt;
	punctuation-trim:leading;
	font-size:10.0pt;
	font-family:"Times New Roman","serif";
	font-variant:small-caps;}
p.MsoToc3, li.MsoToc3, div.MsoToc3
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:21.0pt;
	margin-bottom:.0001pt;
	text-indent:10.0pt;
	punctuation-trim:leading;
	font-size:10.0pt;
	font-family:"Times New Roman","serif";
	font-style:italic;}
p.MsoToc4, li.MsoToc4, div.MsoToc4
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:31.5pt;
	margin-bottom:.0001pt;
	text-indent:10.0pt;
	punctuation-trim:leading;
	font-size:9.0pt;
	font-family:"Times New Roman","serif";}
p.MsoToc5, li.MsoToc5, div.MsoToc5
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:42.0pt;
	margin-bottom:.0001pt;
	text-indent:10.0pt;
	punctuation-trim:leading;
	font-size:9.0pt;
	font-family:"Times New Roman","serif";}
p.MsoToc6, li.MsoToc6, div.MsoToc6
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:52.5pt;
	margin-bottom:.0001pt;
	text-indent:10.0pt;
	punctuation-trim:leading;
	font-size:9.0pt;
	font-family:"Times New Roman","serif";}
p.MsoToc7, li.MsoToc7, div.MsoToc7
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:63.0pt;
	margin-bottom:.0001pt;
	text-indent:10.0pt;
	punctuation-trim:leading;
	font-size:9.0pt;
	font-family:"Times New Roman","serif";}
p.MsoToc8, li.MsoToc8, div.MsoToc8
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:73.5pt;
	margin-bottom:.0001pt;
	text-indent:10.0pt;
	punctuation-trim:leading;
	font-size:9.0pt;
	font-family:"Times New Roman","serif";}
p.MsoToc9, li.MsoToc9, div.MsoToc9
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:84.0pt;
	margin-bottom:.0001pt;
	text-indent:10.0pt;
	punctuation-trim:leading;
	font-size:9.0pt;
	font-family:"Times New Roman","serif";}
p.MsoCommentText, li.MsoCommentText, div.MsoCommentText
	{mso-style-link:"\6279\6CE8\6587\5B57 Char";
	margin:0cm;
	margin-bottom:.0001pt;
	text-indent:10.0pt;
	punctuation-trim:none;
	font-size:10.0pt;
	font-family:"Times New Roman","serif";}
p.MsoHeader, li.MsoHeader, div.MsoHeader
	{mso-style-link:"\9875\7709 Char";
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:center;
	text-indent:10.0pt;
	layout-grid-mode:char;
	punctuation-trim:leading;
	border:none;
	padding:0cm;
	font-size:9.0pt;
	font-family:"Times New Roman","serif";}
p.MsoFooter, li.MsoFooter, div.MsoFooter
	{mso-style-link:"\9875\811A Char";
	margin:0cm;
	margin-bottom:.0001pt;
	text-indent:10.0pt;
	layout-grid-mode:char;
	punctuation-trim:leading;
	font-size:9.0pt;
	font-family:"Times New Roman","serif";}
p.MsoTitle, li.MsoTitle, div.MsoTitle
	{mso-style-link:"\6807\9898 Char";
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:0cm;
	text-align:center;
	text-indent:10.0pt;
	punctuation-trim:none;
	font-size:16.0pt;
	font-family:"Arial","sans-serif";
	font-weight:bold;}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;}
p.MsoDocumentMap, li.MsoDocumentMap, div.MsoDocumentMap
	{mso-style-link:"\6587\6863\7ED3\6784\56FE Char";
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:10.0pt;
	background:navy;
	punctuation-trim:leading;
	font-size:10.0pt;
	font-family:"Times New Roman","serif";}
p
	{margin-right:0cm;
	margin-left:0cm;
	punctuation-trim:leading;
	font-size:12.0pt;
	font-family:"Arial Unicode MS","sans-serif";}
code
	{font-family:"Courier New";
	color:#990000;}
pre
	{mso-style-link:"HTML \9884\8BBE\683C\5F0F Char";
	margin:0cm;
	margin-bottom:.0001pt;
	background:#C3DBFF;
	punctuation-trim:none;
	font-size:11.5pt;
	font-family:"Lucida Console";}
tt
	{font-family:SimSun;}
p.MsoCommentSubject, li.MsoCommentSubject, div.MsoCommentSubject
	{mso-style-link:"\6279\6CE8\4E3B\9898 Char";
	margin:0cm;
	margin-bottom:.0001pt;
	text-indent:10.0pt;
	punctuation-trim:none;
	font-size:10.0pt;
	font-family:"Times New Roman","serif";
	font-weight:bold;}
p.MsoAcetate, li.MsoAcetate, div.MsoAcetate
	{mso-style-link:"\6279\6CE8\6846\6587\672C Char";
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:10.0pt;
	punctuation-trim:none;
	font-size:9.0pt;
	font-family:"Times New Roman","serif";}
p.MsoListParagraph, li.MsoListParagraph, div.MsoListParagraph
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:21.0pt;
	punctuation-trim:none;
	font-size:10.0pt;
	font-family:"Times New Roman","serif";}
span.1Char
	{mso-style-name:"\6807\9898 1 Char";
	mso-style-link:"\6807\9898 1";
	font-family:"Arial","sans-serif";}
span.2Char
	{mso-style-name:"\6807\9898 2 Char";
	mso-style-link:"\6807\9898 2";
	font-family:"Arial","sans-serif";}
span.3Char
	{mso-style-name:"\6807\9898 3 Char";
	mso-style-link:"\6807\9898 3";
	font-family:"Arial","sans-serif";}
span.4Char
	{mso-style-name:"\6807\9898 4 Char";
	mso-style-link:"\6807\9898 4";
	font-family:"Cambria","serif";
	font-weight:bold;}
span.5Char
	{mso-style-name:"\6807\9898 5 Char\,\56FE\9898 Char";
	mso-style-link:"\6807\9898 5\,\56FE\9898";
	font-family:"Arial","sans-serif";}
span.5Char1
	{mso-style-name:"\6807\9898 5 Char1\,\56FE\9898 Char1";
	mso-style-link:"\6807\9898 5\,\56FE\9898";
	font-weight:bold;}
span.HTMLChar
	{mso-style-name:"HTML \9884\8BBE\683C\5F0F Char";
	mso-style-link:"HTML \9884\8BBE\683C\5F0F";
	font-family:"Courier New";}
span.7Char
	{mso-style-name:"\6807\9898 7 Char";
	mso-style-link:"\6807\9898 7";
	font-weight:bold;}
span.9Char
	{mso-style-name:"\6807\9898 9 Char";
	mso-style-link:"\6807\9898 9";
	font-family:"Cambria","serif";}
span.Char
	{mso-style-name:"\6279\6CE8\6587\5B57 Char";
	mso-style-link:\6279\6CE8\6587\5B57;}
span.Char0
	{mso-style-name:"\9875\7709 Char";
	mso-style-link:\9875\7709;}
span.Char1
	{mso-style-name:"\9875\811A Char";
	mso-style-link:\9875\811A;}
span.Char2
	{mso-style-name:"\6807\9898 Char";
	mso-style-link:\6807\9898;
	font-family:"Cambria","serif";
	font-weight:bold;}
span.Char3
	{mso-style-name:"\6587\6863\7ED3\6784\56FE Char";
	mso-style-link:\6587\6863\7ED3\6784\56FE;
	font-family:SimSun;}
span.Char4
	{mso-style-name:"\6279\6CE8\4E3B\9898 Char";
	mso-style-link:\6279\6CE8\4E3B\9898;
	font-weight:bold;}
span.Char5
	{mso-style-name:"\6279\6CE8\6846\6587\672C Char";
	mso-style-link:\6279\6CE8\6846\6587\672C;}
p.a, li.a, div.a
	{mso-style-name:\7F16\7A0B\4EE3\7801;
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:10.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	line-height:12.0pt;
	background:#D9D9D9;
	punctuation-trim:none;
	font-size:9.0pt;
	font-family:"Times New Roman","serif";
	color:black;}
p.a0, li.a0, div.a0
	{mso-style-name:\63D0\9192;
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:10.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-10.0pt;
	line-height:12.0pt;
	punctuation-trim:leading;
	font-size:9.0pt;
	font-family:"Times New Roman","serif";
	color:black;}
p.a1, li.a1, div.a1
	{mso-style-name:\64CD\4F5C\6B65\9AA4;
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:21.25pt;
	line-height:12.0pt;
	punctuation-trim:leading;
	font-size:10.0pt;
	font-family:"Times New Roman","serif";
	color:black;}
p.a2, li.a2, div.a2
	{mso-style-name:\63D2\56FE\7F16\53F7;
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:center;
	punctuation-trim:leading;
	font-size:9.0pt;
	font-family:"Times New Roman","serif";}
p.a3, li.a3, div.a3
	{mso-style-name:\7279\6B8A\63D0\793A\FF08\5982\89C6\9891\FF09;
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:0cm;
	punctuation-trim:leading;
	font-size:10.0pt;
	font-family:"Times New Roman","serif";
	text-decoration:underline;}
p.a4, li.a4, div.a4
	{mso-style-name:\8868\6587;
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:.5pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	line-height:12.0pt;
	punctuation-trim:none;
	font-size:9.0pt;
	font-family:"Times New Roman","serif";}
p.a5, li.a5, div.a5
	{mso-style-name:\6B63\6587\5E76\5217\4E8C\7EA7\6837\5F0F;
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:0cm;
	line-height:12.0pt;
	punctuation-trim:leading;
	font-size:10.0pt;
	font-family:"Times New Roman","serif";}
p.a6, li.a6, div.a6
	{mso-style-name:\6B63\6587\5E76\5217\4E00\7EA7\6837\5F0F;
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:0cm;
	line-height:12.0pt;
	punctuation-trim:leading;
	font-size:10.0pt;
	font-family:"Times New Roman","serif";}
span.Char6
	{mso-style-name:"\63D2\56FE Char";
	mso-style-link:\63D2\56FE;
	font-family:"Arial","sans-serif";
	color:black;}
p.a7, li.a7, div.a7
	{mso-style-name:\63D2\56FE;
	mso-style-link:"\63D2\56FE Char";
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:center;
	punctuation-trim:leading;
	font-size:9.0pt;
	font-family:"Arial","sans-serif";
	color:black;}
p.a8, li.a8, div.a8
	{mso-style-name:\8868\9898;
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:center;
	text-indent:21.0pt;
	punctuation-trim:leading;
	font-size:10.0pt;
	font-family:"Times New Roman","serif";}
p.a9, li.a9, div.a9
	{mso-style-name:\7F16\7A0B\6B65\9AA4;
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:21.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	line-height:13.0pt;
	layout-grid-mode:char;
	background:#E0E0E0;
	punctuation-trim:leading;
	font-size:9.0pt;
	font-family:"Arial","sans-serif";}
span.Char7
	{mso-style-name:"\9879\76EE\7B26\53F7 Char";
	mso-style-link:\9879\76EE\7B26\53F7;}
p.aa, li.aa, div.aa
	{mso-style-name:\9879\76EE\7B26\53F7;
	mso-style-link:"\9879\76EE\7B26\53F7 Char";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:42.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-21.0pt;
	punctuation-trim:none;
	font-size:10.0pt;
	font-family:"Times New Roman","serif";}
span.2Char0
	{mso-style-name:"\6B63\6587\7F29\8FDB2\4E2A\5B57\7B26 Char";
	mso-style-link:\6B63\6587\7F29\8FDB2\4E2A\5B57\7B26;
	font-family:SimSun;}
p.2, li.2, div.2
	{mso-style-name:\6B63\6587\7F29\8FDB2\4E2A\5B57\7B26;
	mso-style-link:"\6B63\6587\7F29\8FDB2\4E2A\5B57\7B26 Char";
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:10.0pt;
	punctuation-trim:leading;
	font-size:10.0pt;
	font-family:"Times New Roman","serif";}
span.Char8
	{mso-style-name:"\4EE3\7801\4F4D\7F6E Char";
	mso-style-link:\4EE3\7801\4F4D\7F6E;
	font-family:"Arial Unicode MS","sans-serif";}
p.ab, li.ab, div.ab
	{mso-style-name:\4EE3\7801\4F4D\7F6E;
	mso-style-link:"\4EE3\7801\4F4D\7F6E Char";
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:10.0pt;
	layout-grid-mode:char;
	punctuation-trim:leading;
	font-size:10.0pt;
	font-family:"Arial Unicode MS","sans-serif";}
p.ac, li.ac, div.ac
	{mso-style-name:\5F3A\8C03\7A81\51FA;
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:21.0pt;
	background:gray;
	punctuation-trim:leading;
	font-size:10.0pt;
	font-family:"Times New Roman","serif";}
span.Char9
	{mso-style-name:"\63D0\793A Char";
	mso-style-link:\63D0\793A;
	font-family:KaiTi_GB2312;
	background:white;}
p.ad, li.ad, div.ad
	{mso-style-name:\63D0\793A;
	mso-style-link:"\63D0\793A Char";
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:10.0pt;
	background:white;
	punctuation-trim:none;
	font-size:10.0pt;
	font-family:"Times New Roman","serif";}
p.ae, li.ae, div.ae
	{mso-style-name:\63D0\9192\6CE8\610F;
	margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:34.0pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:10.0pt;
	line-height:15.6pt;
	background:#D9D9D9;
	punctuation-trim:leading;
	font-size:9.0pt;
	font-family:"Times New Roman","serif";}
p.af, li.af, div.af
	{mso-style-name:\63D2\56FE\6807\6CE8;
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	text-align:center;
	punctuation-trim:leading;
	font-size:9.0pt;
	font-family:"Times New Roman","serif";}
p.af0, li.af0, div.af0
	{mso-style-name:\4E8C\7EA7\9879\76EE;
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	line-height:15.7pt;
	punctuation-trim:leading;
	font-size:10.0pt;
	font-family:"Times New Roman","serif";}
p.af1, li.af1, div.af1
	{mso-style-name:\8868\5934;
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:center;
	line-height:12.0pt;
	punctuation-trim:none;
	font-size:9.0pt;
	font-family:"Times New Roman","serif";}
p.1, li.1, div.1
	{mso-style-name:"\6837\5F0F \9879\76EE\7B26\53F7 +1";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:42.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-21.0pt;
	punctuation-trim:none;
	font-size:10.0pt;
	font-family:"Times New Roman","serif";}
p.20, li.20, div.20
	{mso-style-name:"\6837\5F0F \9879\76EE\7B26\53F7 +2";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:30.9pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-9.9pt;
	punctuation-trim:none;
	font-size:10.0pt;
	font-family:"Times New Roman","serif";}
p.4, li.4, div.4
	{mso-style-name:\6807\98984;
	margin-top:3.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:0cm;
	text-align:justify;
	text-justify:inter-ideograph;
	punctuation-trim:none;
	font-size:10.0pt;
	font-family:"Times New Roman","serif";
	color:black;}
p.abstract, li.abstract, div.abstract
	{mso-style-name:abstract;
	margin:0cm;
	margin-bottom:.0001pt;
	punctuation-trim:none;
	font-size:12.0pt;
	font-family:SimSun;}
p.af2, li.af2, div.af2
	{mso-style-name:\4EE3\7801;
	margin-top:0cm;
	margin-right:5.0pt;
	margin-bottom:0cm;
	margin-left:15.0pt;
	margin-bottom:.0001pt;
	text-indent:10.0pt;
	background:#F3F3F3;
	punctuation-trim:none;
	text-autospace:none;
	font-size:9.0pt;
	font-family:NSimSun;
	color:blue;}
p.af3, li.af3, div.af3
	{mso-style-name:\6280\672F\8BF4\660E;
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:0cm;
	text-indent:10.0pt;
	background:navy;
	punctuation-trim:none;
	font-size:16.0pt;
	font-family:"Arial","sans-serif";
	font-weight:bold;}
p.af4, li.af4, div.af4
	{mso-style-name:\4E0A\673A\64CD\4F5C;
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:0cm;
	text-indent:24.1pt;
	background:#F3F3F3;
	punctuation-trim:none;
	border:none;
	padding:0cm;
	font-size:14.0pt;
	font-family:"Arial","sans-serif";
	font-weight:bold;}
p.21, li.21, div.21
	{mso-style-name:"\5317\5927\6807\9898 2";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:7.05pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-1.0cm;
	punctuation-trim:none;
	font-size:10.0pt;
	font-family:"Times New Roman","serif";}
p.af5, li.af5, div.af5
	{mso-style-name:\5317\5927\4EE3\7801;
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:82.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-21.0pt;
	punctuation-trim:none;
	font-size:10.0pt;
	font-family:"Times New Roman","serif";}
span.ui
	{mso-style-name:ui;
	font-weight:normal;}
span.CharChar2
	{mso-style-name:"Char Char2";
	font-family:"Arial","sans-serif";}
span.code
	{mso-style-name:code;
	font-family:"Courier New";
	color:#000066;}
span.keyword
	{mso-style-name:keyword;
	font-weight:bold;}
span.parameter
	{mso-style-name:parameter;
	font-style:normal;}
span.cs
	{mso-style-name:cs;
	display:none;}
span.vb
	{mso-style-name:vb;
	display:none;}
span.cpp
	{mso-style-name:cpp;
	display:none;}
span.nu
	{mso-style-name:nu;}
span.placeholder
	{mso-style-name:placeholder;
	font-style:normal;}
span.copycode
	{mso-style-name:copycode;
	color:blue;
	font-weight:normal;
	text-decoration:underline;}
span.input
	{mso-style-name:input;
	font-weight:normal;}
span.code-keyword1
	{mso-style-name:code-keyword1;
	color:blue;
	border:none windowtext 1.0pt;
	padding:0cm;}
span.code-comment1
	{mso-style-name:code-comment1;
	color:green;
	border:none windowtext 1.0pt;
	padding:0cm;
	font-style:italic;}
span.code-digit1
	{mso-style-name:code-digit1;
	color:navy;
	border:none windowtext 1.0pt;
	padding:0cm;}
span.code-sdkkeyword1
	{mso-style-name:code-sdkkeyword1;
	color:#339999;
	border:none windowtext 1.0pt;
	padding:0cm;}
p.af6, li.af6, div.af6
	{mso-style-name:"\6837\5F0F \9879\76EE\7B26\53F7 +";
	mso-style-link:"\6837\5F0F \9879\76EE\7B26\53F7 + Char";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:30.9pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-9.9pt;
	punctuation-trim:none;
	font-size:10.0pt;
	font-family:"Times New Roman","serif";}
span.Chara
	{mso-style-name:"\6837\5F0F \9879\76EE\7B26\53F7 + Char";
	mso-style-link:"\6837\5F0F \9879\76EE\7B26\53F7 +";}
.MsoChpDefault
	{font-size:10.0pt;}
 /* Page Definitions */
 @page Section1
	{size:521.65pt 26.0cm;
	margin:76.55pt 52.45pt 51.05pt 52.45pt;
	layout-grid:15.1pt;}
div.Section1
	{page:Section1;}
 /* List Definitions */
 ol
	{margin-bottom:0cm;}
ul
	{margin-bottom:0cm;}
-->
</style>

</head>

<body lang=ZH-CN link=blue vlink=purple style='text-justify-trim:punctuation'>

<div class=Section1 style='layout-grid:15.1pt'>

<h1 style='margin-top:15.1pt;margin-right:0cm;margin-bottom:15.1pt;margin-left:
0cm;text-indent:0cm;line-height:normal;text-autospace:none'><a
name="_Toc213213172"></a><a name="_Toc213416897"></a><a name="_Toc214171515"></a><a
name="_Toc214175825"></a><a name="_Toc226946087"></a><a name="_Toc236133491"></a><a
name="_Toc239220738"></a><a name="_Toc240796629"><span style='font-family:SimHei'>&#31532;</span></a>20<span
style='font-family:SimHei'>&#31456;</span>&nbsp; <span style='font-family:SimHei'>&#32593;&#32476;&#32534;&#31243;</span></h1>

<p class=2 style='text-indent:20.0pt'><span lang=EN-US>C#</span><span
style='font-family:SimSun'>&#26159;&#24494;&#36719;&#38543;&#30528;</span><span
lang=EN-US>VS.net</span><span style='font-family:SimSun'>&#26032;&#25512;&#20986;&#30340;&#19968;&#38376;&#35821;&#35328;&#12290;&#23427;&#20316;&#20026;&#19968;&#38376;&#26032;&#20852;&#30340;&#35821;&#35328;&#65292;&#26377;&#30528;</span><span
lang=EN-US>C++</span><span style='font-family:SimSun'>&#30340;&#24378;&#20581;&#65292;&#21448;&#26377;&#30528;</span><span
lang=EN-US>VB</span><span style='font-family:SimSun'>&#31561;&#30340;&#29305;&#24615;&#12290;</span><span
lang=EN-US>C#</span><span style='font-family:SimSun'>&#22312;&#32593;&#32476;&#32534;&#31243;&#26041;&#38754;&#20063;&#33258;&#28982;&#19981;&#29976;&#33853;&#21518;&#20110;&#20154;&#12290;&#26412;&#31456;&#20171;&#32461;</span><span
lang=EN-US>C#</span><span style='font-family:SimSun'>&#19979;&#23454;&#29616;&#22871;&#25509;&#23383;&#65288;</span><span
lang=EN-US>Sockets</span><span style='font-family:SimSun'>&#65289;&#32534;&#31243;&#30340;&#19968;&#20123;&#22522;&#26412;&#30693;&#35782;</span></p>

<h2 style='margin-top:7.55pt;margin-right:0cm;margin-bottom:7.55pt;margin-left:
0cm'><a name="_Toc239234794"></a><a name="_Toc240797501"></a><a
name="_Toc240800584"><span lang=EN-US>20.1&nbsp; </span></a><span
style='font-family:SimHei'>&#22871;&#25509;&#23383;&#22522;&#26412;&#27010;&#24565;</span></h2>

<p class=2 style='text-indent:20.0pt'><span style='font-family:SimSun'>&#22871;&#25509;&#23383;&#26159;&#36890;&#20449;&#30340;&#22522;&#30707;&#65292;&#26159;&#25903;&#25345;</span><span
lang=EN-US>TCP/IP</span><span style='font-family:SimSun'>&#21327;&#35758;&#30340;&#32593;&#32476;&#36890;&#20449;&#30340;&#22522;&#26412;&#25805;&#20316;&#21333;&#20803;&#12290;&#21487;&#20197;&#23558;&#22871;&#25509;&#23383;&#30475;&#20316;&#19981;&#21516;&#20027;&#26426;&#38388;&#30340;&#36827;&#31243;&#36827;&#34892;&#21452;&#21521;&#36890;&#20449;&#30340;&#31471;&#28857;&#65292;&#23427;&#26500;&#25104;&#20102;&#21333;&#20010;&#20027;&#26426;&#20869;&#21450;&#25972;&#20010;&#32593;&#32476;&#38388;&#30340;&#32534;&#31243;&#30028;&#38754;&#12290;&#22871;&#25509;&#23383;&#23384;&#22312;&#20110;&#36890;&#20449;&#22495;&#20013;&#65292;&#36890;&#20449;&#22495;&#26159;&#20026;&#20102;&#22788;&#29702;&#19968;&#33324;&#30340;&#32447;&#31243;&#36890;&#36807;&#22871;&#25509;&#23383;&#36890;&#20449;&#32780;&#24341;&#36827;&#30340;&#19968;&#31181;&#25277;&#35937;&#27010;&#24565;&#12290;&#22871;&#25509;&#23383;&#36890;&#24120;&#21644;&#21516;&#19968;&#20010;&#22495;&#20013;&#30340;&#22871;&#25509;&#23383;&#20132;&#25442;&#25968;&#25454;&#65288;&#25968;&#25454;&#20132;&#25442;&#20063;&#21487;&#33021;&#31359;&#36234;&#22495;&#30340;&#30028;&#38480;&#65292;&#20294;&#36825;&#26102;&#19968;&#23450;&#35201;&#25191;&#34892;&#26576;&#31181;&#35299;&#37322;&#31243;&#24207;&#65289;&#12290;&#21508;&#31181;&#36827;&#31243;&#20351;&#29992;&#36825;&#20010;&#30456;&#21516;&#30340;&#22495;&#20114;&#30456;&#20043;&#38388;&#29992;</span><span
lang=EN-US>Internet</span><span style='font-family:SimSun'>&#21327;&#35758;&#31751;&#26469;&#36827;&#34892;&#36890;&#20449;&#12290;</span>
</p>

<p class=2 style='text-indent:20.0pt'><span style='font-family:SimSun'>&#22871;&#25509;&#23383;&#21487;&#20197;&#26681;&#25454;&#36890;&#20449;&#24615;&#36136;&#20998;&#31867;&#65292;&#36825;&#31181;&#24615;&#36136;&#23545;&#20110;&#29992;&#25143;&#26159;&#21487;&#35265;&#30340;&#12290;&#24212;&#29992;&#31243;&#24207;&#19968;&#33324;&#20165;&#22312;&#21516;&#19968;&#31867;&#30340;&#22871;&#25509;&#23383;&#38388;&#36827;&#34892;&#36890;&#20449;&#12290;&#19981;&#36807;&#21482;&#35201;&#24213;&#23618;&#30340;&#36890;&#20449;&#21327;&#35758;&#20801;&#35768;&#65292;&#19981;&#21516;&#31867;&#22411;&#30340;&#22871;&#25509;&#23383;&#38388;&#20063;&#29031;&#26679;&#21487;&#20197;&#36890;&#20449;&#12290;&#22871;&#25509;&#23383;&#26377;&#20004;&#31181;&#19981;&#21516;&#30340;&#31867;&#22411;&#65306;&#27969;&#22871;&#25509;&#23383;&#21644;&#25968;&#25454;&#25253;&#22871;&#25509;&#23383;&#12290;</span></p>

<h3 style='margin-top:6.0pt;margin-right:0cm;margin-bottom:6.0pt;margin-left:
0cm'><a name="_Toc239234795"></a><a name="_Toc240797502"></a><a
name="_Toc240800585"></a><span
 lang=EN-US>20.1.1</span><span lang=EN-US>&nbsp; </span><span style='font-family:
SimHei'>&#22871;&#25509;&#23383;&#24037;&#20316;&#21407;&#29702;</span></h3>

<p class=2 style='text-indent:20.0pt'><span style='font-family:SimSun'>&#35201;&#36890;&#36807;&#20114;&#32852;&#32593;&#36827;&#34892;&#36890;&#20449;&#65292;&#33267;&#23569;&#38656;&#35201;&#19968;&#23545;&#22871;&#25509;&#23383;&#65292;&#20854;&#20013;&#19968;&#20010;&#36816;&#34892;&#20110;&#23458;&#25143;&#26426;&#31471;&#65292;&#25105;&#20204;&#31216;&#20043;&#20026;</span><span
lang=EN-US>Client Socket</span><span style='font-family:SimSun'>&#65292;&#21478;&#19968;&#20010;&#36816;&#34892;&#20110;&#26381;&#21153;&#22120;&#31471;&#65292;&#25105;&#20204;&#31216;&#20043;&#20026;</span><span
lang=EN-US>ServerSocket</span><span style='font-family:SimSun'>&#12290;&#22270;</span><span
lang=EN-US>20-1</span><span style='font-family:SimSun'>&#35828;&#26126;&#20102;&#36825;&#31181;&#20449;&#24687;&#20256;&#36882;&#20851;&#31995;&#12290;</span></p>

<p class=a7 style='margin-top:4.5pt;margin-right:0cm;margin-bottom:3.0pt;
margin-left:0cm'><span lang=EN-US><img width=255 height=98 id="&#22270;&#29255; 1"
src="20.files/image002.jpg"
alt="http://www.xzpop.com/UpFiles/News/200705/20070530083006606.gif"></span></p>

<p class=a2 style='margin-top:3.0pt;margin-right:0cm;margin-bottom:4.5pt;
margin-left:0cm'><span style='font-family:SimSun'>&#22270;</span><span
lang=EN-US>20-1&nbsp; </span><span style='font-family:SimSun'>&#22871;&#25509;&#23383;&#20449;&#24687;&#20132;&#25442;</span></p>

<p class=2 style='text-indent:20.0pt'><span style='font-family:SimSun'>&#26681;&#25454;&#36830;&#25509;&#21551;&#21160;&#30340;&#26041;&#24335;&#20197;&#21450;&#26412;&#22320;&#22871;&#25509;&#23383;&#35201;&#36830;&#25509;&#30340;&#30446;&#26631;&#65292;&#22871;&#25509;&#23383;&#20043;&#38388;&#30340;&#36830;&#25509;&#36807;&#31243;&#21487;&#20197;&#20998;&#20026;&#19977;&#20010;&#27493;&#39588;&#65306;&#26381;&#21153;&#22120;&#30417;&#21548;&#65292;&#23458;&#25143;&#31471;&#35831;&#27714;&#65292;&#36830;&#25509;&#30830;&#35748;&#12290;</span></p>

<p class=af6><span lang=EN-US style='font-family:Wingdings'>&sup2;<span
style='font:7.0pt "Times New Roman"'> </span></span><span style='font-family:
SimSun'>&#26381;&#21153;&#22120;&#30417;&#21548;&#65292;&#26159;&#26381;&#21153;&#22120;&#31471;&#22871;&#25509;&#23383;&#24182;&#19981;&#23450;&#20301;&#20855;&#20307;&#30340;&#23458;&#25143;&#31471;&#22871;&#25509;&#23383;&#65292;&#32780;&#26159;&#22788;&#20110;&#31561;&#24453;&#36830;&#25509;&#30340;&#29366;&#24577;&#65292;&#23454;&#26102;&#30417;&#25511;&#32593;&#32476;&#29366;&#24577;&#65307;</span></p>

<p class=af6><span lang=EN-US style='font-family:Wingdings'>&sup2;<span
style='font:7.0pt "Times New Roman"'> </span></span><span style='font-family:
SimSun'>&#23458;&#25143;&#31471;&#35831;&#27714;&#65292;&#26159;&#25351;&#30001;&#23458;&#25143;&#31471;&#30340;&#22871;&#25509;&#23383;&#25552;&#20986;&#36830;&#25509;&#35831;&#27714;&#65292;&#35201;&#36830;&#25509;&#30340;&#30446;&#26631;&#26159;&#26381;&#21153;&#22120;&#31471;&#30340;&#22871;&#25509;&#23383;&#12290;&#20026;&#27492;&#65292;&#23458;&#25143;&#31471;&#30340;&#22871;&#25509;&#23383;&#24517;&#39035;&#39318;&#20808;&#25551;&#36848;&#23427;&#35201;&#36830;&#25509;&#30340;&#26381;&#21153;&#22120;&#30340;&#22871;&#25509;&#23383;&#65292;&#25351;&#20986;&#26381;&#21153;&#22120;&#31471;&#22871;&#25509;&#23383;&#30340;&#22320;&#22336;&#21644;&#31471;&#21475;&#21495;&#65292;&#28982;&#21518;&#23601;&#21521;&#26381;&#21153;&#22120;&#31471;&#22871;&#25509;&#23383;&#25552;&#20986;&#36830;&#25509;&#35831;&#27714;&#12290;</span></p>

<p class=af6><span lang=EN-US style='font-family:Wingdings'>&sup2;<span
style='font:7.0pt "Times New Roman"'> </span></span><span style='font-family:
SimSun'>&#36830;&#25509;&#30830;&#35748;&#65292;&#26159;&#25351;&#24403;&#26381;&#21153;&#22120;&#31471;&#22871;&#25509;&#23383;&#30417;&#21548;&#21040;&#25110;&#32773;&#35828;&#25509;&#25910;&#21040;&#23458;&#25143;&#31471;&#22871;&#25509;&#23383;&#30340;&#36830;&#25509;&#35831;&#27714;&#65292;&#23427;&#23601;&#21709;&#24212;&#23458;&#25143;&#31471;&#22871;&#25509;&#23383;&#30340;&#35831;&#27714;&#65292;&#24314;&#31435;&#19968;&#20010;&#26032;&#30340;&#32447;&#31243;&#65292;&#25226;&#26381;&#21153;&#22120;&#31471;&#22871;&#25509;&#23383;&#30340;&#25551;&#36848;&#21457;&#32473;&#23458;&#25143;&#31471;&#65292;&#19968;&#26086;&#23458;&#25143;&#31471;&#30830;&#35748;&#20102;&#27492;&#25551;&#36848;&#65292;&#36830;&#25509;&#23601;&#24314;&#31435;&#22909;&#20102;&#12290;&#32780;&#26381;&#21153;&#22120;&#31471;&#22871;&#25509;&#23383;&#32487;&#32493;&#22788;&#20110;&#30417;&#21548;&#29366;&#24577;&#65292;&#32487;&#32493;&#25509;&#25910;&#20854;&#20182;&#23458;&#25143;&#31471;&#22871;&#25509;&#23383;&#30340;&#36830;&#25509;&#35831;&#27714;&#12290;</span></p>

<p class=2 style='text-indent:20.0pt'><span style='font-family:SimSun'>&#19979;&#38754;&#20197;&#19968;&#20010;&#31616;&#21333;&#30340;&#32842;&#22825;&#31243;&#24207;&#20026;&#20363;&#65292;&#35828;&#26126;&#32593;&#32476;&#32534;&#31243;&#30340;&#22522;&#26412;&#26041;&#27861;&#12290;&#26412;&#31243;&#24207;&#26159;&#22522;&#20110;</span><span
lang=EN-US>C/S</span><span style='font-family:SimSun'>&#65288;&#26381;&#21153;&#22120;</span><span
lang=EN-US>/</span><span style='font-family:SimSun'>&#23458;&#25143;&#31471;&#65289;&#26500;&#26550;&#30340;&#65292;&#31243;&#24207;&#21253;&#21547;&#19968;&#20010;&#26381;&#21153;&#22120;&#31471;&#30340;&#24212;&#29992;&#31243;&#24207;&#21644;&#19968;&#20010;&#23458;&#25143;&#31471;&#30340;&#24212;&#29992;&#31243;&#24207;&#12290;&#31243;&#24207;&#22788;&#29702;&#22522;&#26412;&#27969;&#31243;&#35265;&#22270;</span><span
lang=EN-US>20-2</span><span style='font-family:SimSun'>&#25152;&#31034;&#12290;</span></p>

<p class=a7 style='margin-top:4.5pt;margin-right:0cm;margin-bottom:3.0pt;
margin-left:0cm'><span lang=EN-US><img width=292 height=251 id="&#22270;&#29255; 2"
src="20.files/image003.jpg"
alt="http://wutde.whut.edu.cn/network/study/experiment/pic/p28.gif"></span></p>

<p class=a2 style='margin-top:3.0pt;margin-right:0cm;margin-bottom:4.5pt;
margin-left:0cm'><span style='font-family:SimSun'>&#22270;</span><span
lang=EN-US>20-2&nbsp; </span><span style='font-family:SimSun'>&#31243;&#24207;&#22788;&#29702;&#27969;&#31243;</span></p>

<h4 style='margin-top:3.0pt;margin-right:0cm;margin-bottom:3.0pt;margin-left:
20.0pt'><span lang=EN-US>1. </span><span style='font-family:SimHei'>&#26381;&#21153;&#22120;&#31243;&#24207;&#32534;&#20889;&#24605;&#36335;</span></h4>

<p class=2 style='text-indent:20.0pt'><span style='font-family:SimSun'>&#39318;&#20808;&#65292;&#22312;&#26381;&#21153;&#22120;&#19978;&#36816;&#34892;&#26381;&#21153;&#22120;&#31471;&#30340;&#24212;&#29992;&#31243;&#24207;&#65292;&#35813;&#31243;&#24207;&#19968;&#36816;&#34892;&#23601;&#24320;&#22987;&#26381;&#21153;&#22120;&#30417;&#21548;&#12290;&#28982;&#21518;&#65292;&#22312;&#23458;&#25143;&#26426;&#19978;&#23601;&#21487;&#20197;&#25171;&#24320;&#23458;&#25143;&#31471;&#30340;&#24212;&#29992;&#31243;&#24207;&#12290;&#31243;&#24207;&#25171;&#24320;&#21518;&#21487;&#20197;&#19982;&#26381;&#21153;&#22120;&#31471;&#24212;&#29992;&#31243;&#24207;&#36827;&#34892;&#36830;&#25509;&#65292;&#21363;&#36827;&#34892;&#23458;&#25143;&#31471;&#35831;&#27714;&#12290;&#22312;&#36830;&#25509;&#30830;&#35748;&#21518;&#65292;&#23458;&#25143;&#31471;&#29992;&#25143;&#21487;&#20197;&#21644;&#20854;&#20182;&#30340;&#23458;&#25143;&#31471;&#29992;&#25143;&#36827;&#34892;&#32842;&#22825;&#12290;&#23458;&#25143;&#31471;&#20154;&#25968;&#27809;&#26377;&#38480;&#21046;&#65292;&#21516;&#26102;&#36824;&#25903;&#25345;</span><span
lang=EN-US>&#8220;</span><span style='font-family:SimSun'>&#24708;&#24708;&#35805;</span><span
lang=EN-US>&#8221;</span><span style='font-family:SimSun'>&#32842;&#22825;&#27169;&#24335;&#65292;&#25903;&#25345;&#32842;&#22825;&#35760;&#24405;&#12290;</span></p>

<p class=2 style='text-indent:20.0pt'><span style='font-family:SimSun'>&#31243;&#24207;&#20013;&#20026;&#20102;&#22788;&#29702;&#27599;&#20010;&#23458;&#25143;&#31471;&#30340;&#20449;&#24687;&#36824;&#29992;&#21040;&#20102;&#22810;&#32447;&#31243;&#26426;&#21046;&#12290;&#22312;&#27599;&#20010;&#23458;&#25143;&#31471;&#19982;&#26381;&#21153;&#22120;&#31471;&#36830;&#25509;&#25104;&#21151;&#21518;&#65292;&#23427;&#20204;&#20043;&#38388;&#23601;&#24314;&#31435;&#19968;&#20010;&#32447;&#31243;&#12290;&#36825;&#26679;&#36816;&#29992;&#20102;&#22810;&#32447;&#31243;&#20043;&#21518;&#65292;&#23458;&#25143;&#31471;&#20043;&#38388;&#23601;&#19981;&#20250;&#30456;&#20114;&#24433;&#21709;&#65292;&#21363;&#20351;&#20854;&#20013;&#19968;&#20010;&#20986;&#20102;&#38169;&#35823;&#20063;&#19981;&#20250;&#24433;&#21709;&#21040;&#21478;&#19968;&#20010;&#12290;&#20855;&#20307;&#27493;&#39588;&#22914;&#19979;&#65306;</span></p>

<p class=2 style='text-indent:20.0pt'><span style='font-family:SimSun'>&#65288;</span><span
lang=EN-US>1</span><span style='font-family:SimSun'>&#65289;<span
style='letter-spacing:-.2pt'>&#25171;&#24320;</span></span><span lang=EN-US
style='letter-spacing:-.2pt'>VS.net</span><span style='font-family:SimSun;
letter-spacing:-.2pt'>&#65292;&#26032;&#24314;&#19968;&#20010;</span><span
lang=EN-US style='letter-spacing:-.2pt'>C#</span><span style='font-family:SimSun;
letter-spacing:-.2pt'>&#30340;&#27169;&#26495;&#20026;</span><span lang=EN-US
style='letter-spacing:-.2pt'>&#8220;Windows </span><span style='font-family:
SimSun;letter-spacing:-.2pt'>&#24212;&#29992;&#31243;&#24207;</span><span
lang=EN-US style='letter-spacing:-.2pt'>&#8221;</span><span style='font-family:
SimSun;letter-spacing:-.2pt'>&#30340;&#39033;&#30446;&#65292;&#19981;&#22952;&#21629;&#21517;&#20026;</span><span
lang=EN-US style='letter-spacing:-.2pt'>&#8220;Chat Server&#8221;</span><span
style='font-family:SimSun;letter-spacing:-.2pt'>&#12290;</span><span
style='letter-spacing:-.2pt'> </span></p>

<p class=2 style='text-indent:20.0pt'><span style='font-family:SimSun'>&#65288;</span><span
lang=EN-US>2</span><span style='font-family:SimSun'>&#65289;&#24067;&#32622;&#30028;&#38754;&#12290;&#26368;&#32456;&#30028;&#38754;&#35774;&#35745;&#32467;&#26524;&#22914;&#22270;</span><span
lang=EN-US>20-3</span><span style='font-family:SimSun'>&#25152;&#31034;&#12290;</span></p>

<p class=a7 style='margin-top:4.5pt;margin-right:0cm;margin-bottom:3.0pt;
margin-left:0cm'><span lang=EN-US><img width=198 height=171 id="&#22270;&#29255; 3"
src="20.files/image004.jpg"></span></p>

<p class=a2 style='margin-top:3.0pt;margin-right:0cm;margin-bottom:4.5pt;
margin-left:0cm'><span style='font-family:SimSun'>&#22270;</span><span
lang=EN-US>20-3&nbsp; </span><span style='font-family:SimSun'>&#31243;&#24207;&#30028;&#38754;&#31034;&#20363;</span></p>

<p class=2 style='margin-bottom:3.0pt;text-indent:20.0pt'><span
style='font-family:SimSun'>&#65288;</span><span lang=EN-US>3</span><span
style='font-family:SimSun'>&#65289;&#26381;&#21153;&#22120;&#31471;&#31243;&#24207;&#30340;&#20195;&#30721;&#32534;&#20889;&#12290;&#23545;&#20110;&#26381;&#21153;&#22120;&#31471;&#65292;&#20027;&#35201;&#30340;&#20316;&#29992;&#26159;&#30417;&#21548;&#23458;&#25143;&#31471;&#30340;&#36830;&#25509;&#35831;&#27714;&#24182;&#30830;&#35748;&#20854;&#35831;&#27714;&#12290;&#27604;&#22914;&#31243;&#24207;&#19968;&#24320;&#22987;&#20415;&#25171;&#24320;&#19968;&#20010;</span><span
lang=EN-US>StartListening() </span><span style='font-family:SimSun'>&#32447;&#31243;&#12290;</span>
</p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>private void
StartListening() </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>{&nbsp; listener = new
TcpListener(listenport); </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;
listener.Start(); </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; while
(true) </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; { </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; &nbsp; try
</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; &nbsp; {
&nbsp;&nbsp;&nbsp;&nbsp; Socket s = listener.AcceptSocket(); //</span><span
style='font-family:SimSun'>&#24590;&#26679;&#25511;&#21046;&#30340;&#24490;&#29615;&#20197;&#20351;&#21482;&#26377;&#29992;&#25143;&#35831;&#27714;&#26102;&#25165;&#21019;&#31435;&#32447;&#31243;&#65311;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; clientsocket
= s; </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;clientservice
= new Thread(new ThreadStart(ServiceClient)); //</span><span style='font-family:
SimSun'>&#26032;&#30340;&#32447;&#31243;</span><span lang=EN-US>ServiceClient</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; clientservice.Start();
</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; &nbsp; }
</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; &nbsp; catch(Exception
e) </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;{
&nbsp;&nbsp; Console.WriteLine(e.ToString() ); </span></p>

<p class=a style='margin-left:20.0pt;text-indent:28.0pt'><span lang=EN-US>}&nbsp;&nbsp;&nbsp;&nbsp; 
</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>}</span></p>

<p class=2 style='margin-top:3.0pt;text-indent:20.0pt'><span style='font-family:
SimSun'>&#35813;&#32447;&#31243;&#26159;&#19968;&#30452;&#22788;&#20110;&#36816;&#34892;&#29366;&#24577;&#30340;&#12290;&#24403;&#26381;&#21153;&#22120;&#31471;&#25509;&#25910;&#21040;&#19968;&#20010;&#26469;&#33258;&#23458;&#25143;&#31471;&#30340;&#36830;&#25509;&#35831;&#27714;&#21518;&#65292;&#23427;&#23601;&#25171;&#24320;&#19968;&#20010;</span><span
lang=EN-US>ServiceClient () </span><span style='font-family:SimSun'>&#32447;&#31243;&#26469;&#26381;&#21153;&#23458;&#25143;&#31471;&#12290;&#24403;&#19968;&#20010;&#36830;&#25509;&#34987;&#24314;&#31435;&#21518;&#65292;&#27599;&#20010;&#23458;&#25143;&#31471;&#23601;&#34987;&#36171;&#20104;&#19968;&#20010;&#23646;&#20110;&#23427;&#33258;&#24049;&#30340;&#22871;&#25509;&#23383;&#12290;</span></p>

<p class=2 style='margin-bottom:3.0pt;text-indent:20.0pt'><span
style='font-family:SimSun'>&#21516;&#26102;&#65292;&#19968;&#20010;</span><span
lang=EN-US>Client</span><span style='font-family:SimSun'>&#31867;&#30340;&#23545;&#35937;&#34987;&#24314;&#31435;&#12290;&#35813;&#23545;&#35937;&#21253;&#21547;&#20102;&#23458;&#25143;&#31471;&#30340;&#19968;&#20123;&#30456;&#20851;&#20449;&#24687;&#65292;&#35813;&#20449;&#24687;&#34987;&#20445;&#23384;&#22312;&#19968;&#20010;&#25968;&#32452;&#21015;&#34920;&#20013;&#12290;</span><span
lang=EN-US>Client</span><span style='font-family:SimSun'>&#31867;&#22914;&#19979;&#65306;</span>
</p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>public class Client </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
private Thread clthread; </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; &nbsp; private
EndPoint endpoint; </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; private
string name; </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; &nbsp; private
Socket sock; </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; &nbsp; public
Client(string _name, EndPoint _endpoint, Thread _thread, Socket _sock) //</span><span
style='font-family:SimSun'>&#26500;&#36896;&#20989;&#25968;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;{&nbsp;&nbsp;&nbsp;&nbsp; clthread
= _thread; </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; endpoint
= _endpoint; </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; name
= _name; </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sock
= _sock; </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; &nbsp; public
override string ToString() </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; &nbsp; {
&nbsp;&nbsp;&nbsp;&nbsp; return endpoint.ToString()+ &quot; : &quot; +
name;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; public
Thread CLThread </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; &nbsp; {
get{return clthread;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; set{clthread =
value;}&nbsp;&nbsp;&nbsp;&nbsp; } </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;public
EndPoint Host </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; &nbsp; {&nbsp;
get{return endpoint;}&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; set{endpoint
= value;}&nbsp;&nbsp;&nbsp;&nbsp; } </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;public
string Name </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; &nbsp; {&nbsp;
get{return name;}&nbsp;&nbsp;&nbsp;&nbsp; set{name =
value;}&nbsp;&nbsp;&nbsp;&nbsp; } </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; &nbsp; public
Socket Sock </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; &nbsp; {&nbsp;&nbsp;
get{return sock;}&nbsp;&nbsp;&nbsp;&nbsp; set{sock = value;}&nbsp;&nbsp; </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp; } </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>}</span></p>

<p class=2 style='margin-top:3.0pt;text-indent:20.0pt'><span style='font-family:
SimSun'>&#31243;&#24207;&#30340;&#20027;&#20307;&#37096;&#20998;&#24212;&#26159;</span><span
lang=EN-US>ServiceClient</span><span style='font-family:SimSun'>&#65288;&#65289;&#20989;&#25968;&#12290;&#35813;&#20989;&#25968;&#26159;&#19968;&#20010;&#29420;&#31435;&#30340;&#32447;&#31243;&#65292;&#20854;&#20027;&#35201;&#37096;&#20998;&#26159;&#19968;&#20010;</span><span
lang=EN-US>while</span><span style='font-family:SimSun'>&#24490;&#29615;&#12290;&#22312;&#24490;&#29615;&#20307;&#20869;&#65292;&#31243;&#24207;&#22788;&#29702;&#21508;&#31181;&#23458;&#25143;&#31471;&#21629;&#20196;&#12290;&#26381;&#21153;&#22120;&#31471;&#25509;&#25910;&#26469;&#33258;&#23458;&#25143;&#31471;&#30340;&#20197;</span><span
lang=EN-US>ASCII</span><span style='font-family:SimSun'>&#30721;&#32473;&#20986;&#30340;&#23383;&#31526;&#20018;&#65292;&#20854;&#20013;&#21253;&#21547;&#20102;&#19968;&#20010;</span><span
lang=EN-US>&#8220;|&#8221;</span><span style='font-family:SimSun'>&#24418;&#24335;&#30340;&#20998;&#38548;&#31526;&#12290;</span></p>

<p class=2 style='text-indent:20.0pt'><span style='font-family:SimSun'>&#23383;&#31526;&#20018;&#20013;</span><span
lang=EN-US>&#8220;|&#8221;</span><span style='font-family:SimSun'>&#20197;&#21069;&#30340;&#37096;&#20998;&#23601;&#26159;&#20855;&#20307;&#30340;&#21629;&#20196;&#65292;&#21253;&#25324;</span><span
lang=EN-US>CONN</span><span style='font-family:SimSun'>&#12289;</span><span
lang=EN-US>CHAT</span><span style='font-family:SimSun'>&#12289;</span><span
lang=EN-US>PRIV</span><span style='font-family:SimSun'>&#12289;</span><span
lang=EN-US>GONE</span><span style='font-family:SimSun'>&#22235;&#31181;&#31867;&#22411;&#12290;</span><span
lang=EN-US>CONN</span><span style='font-family:SimSun'>&#21629;&#20196;&#24314;&#31435;&#19968;&#20010;&#26032;&#30340;&#23458;&#25143;&#31471;&#36830;&#25509;&#65292;&#23558;&#29616;&#26377;&#30340;&#29992;&#25143;&#21015;&#34920;&#21457;&#36865;&#32473;&#26032;&#29992;&#25143;&#24182;&#21578;&#30693;&#20854;&#20182;&#29992;&#25143;&#26377;&#19968;&#20010;&#26032;&#29992;&#25143;&#21152;&#20837;&#12290;</span><span
lang=EN-US>CHAT</span><span style='font-family:SimSun'>&#21629;&#20196;&#23558;&#26032;&#30340;&#20449;&#24687;&#21457;&#36865;&#32473;&#25152;&#26377;&#29992;&#25143;&#12290;</span></p>

<p class=2 style='margin-bottom:3.0pt;text-indent:20.0pt'><span lang=EN-US>PRIV</span><span
style='font-family:SimSun'>&#21629;&#20196;&#23558;&#24708;&#24708;&#35805;&#21457;&#36865;&#32473;&#26576;&#20010;&#29992;&#25143;&#12290;</span><span
lang=EN-US>GONE</span><span style='font-family:SimSun'>&#21629;&#20196;&#20174;&#29992;&#25143;&#21015;&#34920;&#20013;&#38500;&#21435;&#19968;&#20010;&#24050;&#31163;&#24320;&#30340;&#29992;&#25143;&#24182;&#21578;&#30693;&#20854;&#20182;&#30340;&#29992;&#25143;&#26576;&#26576;&#24050;&#32463;&#31163;&#24320;&#20102;&#12290;&#21516;&#26102;&#65292;</span><span
lang=EN-US>GONE</span><span style='font-family:SimSun'>&#21629;&#20196;&#21487;&#20197;&#35774;&#32622;&#24067;&#23572;&#22411;&#30340;&#21464;&#37327;</span><span
lang=EN-US>keepalive</span><span style='font-family:SimSun'>&#20026;</span><span
lang=EN-US>false</span><span style='font-family:SimSun'>&#20174;&#32780;&#32467;&#26463;&#19982;&#23458;&#25143;&#31471;&#36830;&#25509;&#30340;&#32447;&#31243;&#12290;</span><span
lang=EN-US>ServiceClient</span><span style='font-family:SimSun'>&#65288;&#65289;&#20989;&#25968;&#22914;&#19979;&#65306;</span>
</p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>private void
ServiceClient() </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Socket
client = clientsocket; </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;bool
keepalive = true; </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;while
(keepalive) </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; &nbsp; {
&nbsp;&nbsp;&nbsp;&nbsp; Byte[] buffer = new Byte[1024]; </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; client.Receive(buffer);
</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;string
clientcommand = System.Text.Encoding.ASCII.GetString(buffer); </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;string[]
tokens = clientcommand.Split(new Char[]{'|'}); </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;Console.WriteLine(clientcommand);
</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if
(tokens[0] == &quot;CONN&quot;) </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {&nbsp;
&nbsp;&nbsp; for(int n=0; n </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {
&nbsp;&nbsp;&nbsp;&nbsp; Client cl = (Client)clients[n]; </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SendToClient(cl,
&quot;JOIN|&quot; + tokens[1]); </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; EndPoint
ep = client.RemoteEndPoint; </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Client
c = new Client(tokens[1], ep, clientservice, client); </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; clients.Add(c);
</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; string
message = &quot;LIST|&quot; + GetChatterList() +&quot;\r\n&quot;; </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SendToClient(c,
message); </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; lbClients.Items.Add(c);
</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if
(tokens[0] == &quot;CHAT&quot;) </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for(int
n=0; n </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {
&nbsp;&nbsp;&nbsp;&nbsp; Client cl = (Client)clients[n]; </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SendToClient(cl,
clientcommand); </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if
(tokens[0] == &quot;PRIV&quot;) </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
string destclient = tokens[3]; </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;for(int
n=0; n </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Client
cl = (Client)clients[n]; </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(cl.Name.CompareTo(tokens[3])
== 0) </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SendToClient(cl,
clientcommand); </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(cl.Name.CompareTo(tokens[1])
== 0) </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SendToClient(cl,
clientcommand); </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;if
(tokens[0] == &quot;GONE&quot;) </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {
&nbsp;&nbsp;&nbsp;&nbsp; int remove = 0; </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;bool
found = false; </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;int
c = clients.Count; </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;for(int
n=0; n </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;{&nbsp;&nbsp;&nbsp;&nbsp; Client
cl = (Client)clients[n]; </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SendToClient(cl,
clientcommand); </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(cl.Name.CompareTo(tokens[1])
== 0) </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;{
&nbsp;&nbsp; remove = n; </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; found
= true; </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; lbClients.Items.Remove(cl);
</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;}
</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(found)
</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; clients.RemoveAt(remove);
</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; client.Close();
</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; keepalive
= false; </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
} &nbsp;&nbsp; }</span></p>

<p class=2 style='margin-top:3.0pt;text-indent:20.0pt'><span style='font-family:
SimSun'>&#36825;&#26679;&#65292;&#26381;&#21153;&#22120;&#31471;&#31243;&#24207;&#23601;&#22522;&#26412;&#23436;&#25104;&#20102;&#12290;</span></p>

<h4 style='margin-top:3.0pt;margin-right:0cm;margin-bottom:3.0pt;margin-left:
20.0pt'><span lang=EN-US>2. </span><span style='font-family:SimHei'>&#23458;&#25143;&#31471;&#31243;&#24207;&#32534;&#20889;&#24605;&#36335;</span></h4>

<p class=2 style='text-indent:20.0pt'><span style='font-family:SimSun'>&#39318;&#20808;&#65292;&#20063;&#26159;&#25171;&#24320;</span><span
lang=EN-US>VS.net</span><span style='font-family:SimSun'>&#65292;&#26032;&#24314;&#19968;&#20010;</span><span
lang=EN-US>C#</span><span style='font-family:SimSun'>&#30340;&#27169;&#26495;&#20026;</span><span
lang=EN-US>&#8220;Windows </span><span style='font-family:SimSun'>&#24212;&#29992;&#31243;&#24207;</span><span
lang=EN-US>&#8221;</span><span style='font-family:SimSun'>&#30340;&#39033;&#30446;&#65292;&#19981;&#22952;&#21629;&#21517;&#20026;</span><span
lang=EN-US>&#8220;Chat Client&#8221;</span><span style='font-family:SimSun'>&#12290;</span></p>

<p class=2 style='text-indent:20.0pt'><span style='font-family:SimSun'>&#28982;&#21518;&#24067;&#32622;&#30028;&#38754;&#12290;&#30028;&#38754;&#35774;&#35745;&#22909;&#21518;&#22914;&#22270;</span><span
lang=EN-US>20-4</span><span style='font-family:SimSun'>&#25152;&#31034;&#65306;</span>
</p>

<p class=a7 style='margin-top:4.5pt;margin-right:0cm;margin-bottom:3.0pt;
margin-left:0cm'><span lang=EN-US><img width=234 height=134 id="&#22270;&#29255; 4"
src="20.files/image005.jpg"></span></p>

<p class=a2 style='margin-top:3.0pt;margin-right:0cm;margin-bottom:4.5pt;
margin-left:0cm'><span style='font-family:SimSun'>&#22270;</span><span
lang=EN-US>20-4&nbsp; </span><span style='font-family:SimSun'>&#23458;&#25143;&#31471;&#30028;&#38754;&#31034;&#20363;</span></p>

<p class=2 style='margin-bottom:3.0pt;text-indent:20.0pt'><span
style='font-family:SimSun'>&#24403;&#23458;&#25143;&#31471;&#35797;&#22270;&#21644;&#26381;&#21153;&#22120;&#31471;&#36827;&#34892;&#36830;&#25509;&#26102;&#65292;&#19968;&#20010;&#36830;&#25509;&#24517;&#39035;&#24314;&#31435;&#32780;&#19988;&#24471;&#21521;&#26381;&#21153;&#22120;&#31471;&#36827;&#34892;&#27880;&#20876;&#12290;</span><span
lang=EN-US>EstablishConnectio () </span><span style='font-family:SimSun'>&#20989;&#25968;&#36816;&#29992;&#19968;&#20010;</span><span
lang=EN-US>TcpClient</span><span style='font-family:SimSun'>&#26469;&#21644;&#26381;&#21153;&#22120;&#31471;&#21462;&#24471;&#36830;&#25509;&#65292;&#21516;&#26102;&#21019;&#24314;&#19968;&#20010;</span><span
lang=EN-US>NetworkStream</span><span style='font-family:SimSun'>&#26469;&#21457;&#36865;&#28040;&#24687;&#12290;&#36824;&#26377;&#31471;&#21475;&#21495;&#21644;&#26381;&#21153;&#22120;&#31471;&#30340;&#26159;&#20445;&#25345;&#19968;&#33268;&#30340;&#65292;&#27604;&#22914;&#22343;&#20026;</span><span
lang=EN-US>1000</span><span style='font-family:SimSun'>&#12290;&#27604;&#22914;&#25105;&#20204;&#32534;&#20889;&#19968;&#20010;&#20989;&#25968;</span><span
lang=EN-US>EstablishConnection</span><span style='font-family:SimSun'>&#65288;&#65289;&#20989;&#25968;&#65292;&#29992;&#26469;&#30830;&#35748;&#36830;&#25509;&#65306;</span>
</p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;private
void EstablishConnection() </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;{
</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; statusBar1.Text
= &quot;</span><span style='font-family:SimSun'>&#27491;&#22312;&#36830;&#25509;&#21040;&#26381;&#21153;&#22120;</span><span
lang=EN-US>&quot;; </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; try
</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {
</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; clientsocket
= new TcpClient(serveraddress,serverport); </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ns
= clientsocket.GetStream(); </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sr
= new StreamReader(ns); </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;connected
= true; </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;catch
(Exception) </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;{
&nbsp;&nbsp;&nbsp; MessageBox.Show(&quot;</span><span style='font-family:SimSun'>&#19981;&#33021;&#36830;&#25509;&#21040;&#26381;&#21153;&#22120;&#65281;</span><span
lang=EN-US>&quot;,&quot;</span><span style='font-family:SimSun'>&#38169;&#35823;</span><span
lang=EN-US>&quot;,&nbsp;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
MessageBoxButtons.OK, MessageBoxIcon.Exclamation); </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; statusBar1.Text
= &quot;</span><span style='font-family:SimSun'>&#24050;&#26029;&#24320;&#36830;&#25509;</span><span
lang=EN-US>&quot;; </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
</span></p>

<p class=2 style='margin-top:3.0pt;margin-right:0cm;margin-bottom:3.0pt;
margin-left:0cm;text-indent:20.0pt'><span style='font-family:SimSun'>&#22312;&#21644;&#26381;&#21153;&#22120;&#31471;&#36830;&#25509;&#25104;&#21151;&#21518;&#65292;&#31243;&#24207;&#23601;&#29992;</span><span
lang=EN-US>RegisterWithServer</span><span style='font-family:SimSun'>&#65288;&#65289;&#20989;&#25968;&#21521;&#26381;&#21153;&#22120;&#31471;&#21457;&#36865;&#19968;&#20010;</span><span
lang=EN-US>CONN</span><span style='font-family:SimSun'>&#21629;&#20196;&#12290;&#35813;&#21629;&#20196;&#20808;&#26159;&#21457;&#36865;&#35813;&#29992;&#25143;&#30340;&#21517;&#31216;&#65292;&#28982;&#21518;&#20174;&#26381;&#21153;&#22120;&#31471;&#33719;&#24471;&#20854;&#20182;&#25152;&#26377;&#29992;&#25143;&#30340;&#21015;&#34920;&#65292;&#25152;&#26377;&#29992;&#25143;&#21015;&#34920;&#26159;&#22312;&#21015;&#34920;&#65288;&#27604;&#22914;&#20351;&#29992;</span><span
lang=EN-US>list</span><span style='font-family:SimSun'>&#25511;&#20214;&#65289;&#20013;&#26174;&#31034;&#30340;&#12290;&#35813;&#20989;&#25968;&#22914;&#19979;&#65306;</span>
</p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;private
void RegisterWithServer() </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp; &nbsp;try
</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {
&nbsp;&nbsp;&nbsp;&nbsp; string command = &quot;CONN|&quot; + ChatOut.Text; </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;Byte[]
outbytes = System.Text.Encoding.ASCII.GetBytes(command.ToCharArray()); </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;ns.Write(outbytes,0,outbytes.Length);
</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;string
serverresponse = sr.ReadLine(); </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; serverresponse.Trim();
</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; string[]
tokens = serverresponse.Split(new Char[]{'|'}); </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(tokens[0]
== &quot;LIST&quot;) </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {
&nbsp;&nbsp;&nbsp;&nbsp; statusBar1.Text = &quot;</span><span style='font-family:
SimSun'>&#24050;&#36830;&#25509;</span><span lang=EN-US>&quot;; </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; btnDisconnect.Enabled
= true; </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;for(int
n=1; n </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; lbChatters.Items.Add(tokens[n].Trim(new
char[]{'\r','\n'})); </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;this.Text
= clientname + &quot;</span><span style='font-family:SimSun'>&#65306;&#24050;&#36830;&#25509;&#21040;&#26381;&#21153;&#22120;</span><span
lang=EN-US>&quot;; </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; catch
(Exception) </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;MessageBox.Show(&quot;</span><span
style='font-family:SimSun'>&#27880;&#20876;&#26102;&#21457;&#29983;&#38169;&#35823;&#65281;</span><span
lang=EN-US>&quot;,&quot;</span><span style='font-family:SimSun'>&#38169;&#35823;</span><span
lang=EN-US>&quot;, </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MessageBoxButtons.OK,
MessageBoxIcon.Exclamation); </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>} &nbsp; &nbsp;}</span></p>

<p class=2 style='margin-top:3.0pt;margin-right:0cm;margin-bottom:3.0pt;
margin-left:0cm;text-indent:20.0pt'><span style='font-family:SimSun'>&#22312;&#27492;&#20043;&#21518;&#65292;&#24403;&#28982;&#23601;&#26159;&#29992;&#25143;&#20043;&#38388;&#30340;&#32842;&#22825;&#20102;&#65292;&#30001;</span><span
lang=EN-US>ReceiveChat</span><span style='font-family:SimSun'>&#65288;&#65289;&#20989;&#25968;&#26469;&#23436;&#25104;&#12290;&#35813;&#20989;&#25968;&#26159;&#19968;&#20010;&#29420;&#31435;&#30340;&#32447;&#31243;&#65292;&#23427;&#22788;&#29702;&#25152;&#26377;&#29992;&#25143;&#33719;&#24471;&#30340;&#28040;&#24687;&#21644;&#29992;&#25143;&#21457;&#36865;&#30340;&#28040;&#24687;&#12290;&#23427;&#20027;&#35201;&#22788;&#29702;&#20102;</span><span
lang=EN-US>CHAT</span><span style='font-family:SimSun'>&#12289;</span><span
lang=EN-US>PRIV</span><span style='font-family:SimSun'>&#12289;</span><span
lang=EN-US>JOIN</span><span style='font-family:SimSun'>&#12289;</span><span
lang=EN-US>GONE</span><span style='font-family:SimSun'>&#12289;</span><span
lang=EN-US>QUIT</span><span style='font-family:SimSun'>&#31561;&#21629;&#20196;&#65292;&#22788;&#29702;&#30340;&#26041;&#27861;&#21644;&#26381;&#21153;&#22120;&#31471;&#30340;&#31867;&#20284;&#12290;&#20855;&#20307;&#20989;&#25968;&#23454;&#29616;&#22914;&#19979;&#65306;</span>
</p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>private void
ReceiveChat() </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bool
keepalive = true; </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; while
(keepalive) </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;try
</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {
&nbsp;&nbsp;&nbsp;&nbsp; Byte[] buffer = new Byte[2048]; </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ns.Read(buffer,0,buffer.Length);
</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; string
chatter = System.Text.Encoding.ASCII.GetString(buffer); </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; string[]
tokens = chatter.Split(new Char[]{'|'}); </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;if
(tokens[0] == &quot;CHAT&quot;) </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {
&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;rtbChatIn.AppendText(tokens[1]); </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(logging)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;logwriter.WriteLine(tokens[1]);
</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if
(tokens[0] == &quot;PRIV&quot;) </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {
&nbsp;&nbsp;&nbsp;&nbsp; rtbChatIn.AppendText(&quot;Private from &quot;); </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; rtbChatIn.AppendText(tokens[1].Trim()
); </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; rtbChatIn.AppendText(tokens[2]
+ &quot;\r\n&quot;); </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(logging)
</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; logwriter.Write(&quot;Private
from &quot;); </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; logwriter.Write(tokens[1].Trim()
); </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; logwriter.WriteLine(tokens[2]
+ &quot;\r\n&quot;); </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;if
(tokens[0] == &quot;JOIN&quot;) </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; rtbChatIn.AppendText(tokens[1].Trim()
); </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;rtbChatIn.AppendText(&quot;
has joined the Chat\r\n&quot;); </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(logging)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; logwriter.WriteLine(tokens[1]+&quot;
has joined the Chat&quot;); </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;string
newguy = tokens[1].Trim(new char[]{'\r','\n'}); </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; lbChatters.Items.Add(newguy);
</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if
(tokens[0] == &quot;GONE&quot;) </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;rtbChatIn.AppendText(tokens[1].Trim()
); </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; rtbChatIn.AppendText(&quot;
has left the Chat\r\n&quot;); </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(logging)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
logwriter.WriteLine(tokens[1]+&quot; has left the Chat&quot;);</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;lbChatters.Items.Remove(tokens[1].Trim(new
char[]{'\r','\n'})); </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if
(tokens[0] == &quot;QUIT&quot;) </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ns.Close();
</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; clientsocket.Close();
</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; keepalive
= false; </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; statusBar1.Text
= &quot;</span><span style='font-family:SimSun'>&#26381;&#21153;&#22120;&#31471;&#24050;&#20572;&#27490;</span><span
lang=EN-US>&quot;; </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; connected=
false; </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; btnSend.Enabled
= false; </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; btnDisconnect.Enabled
= false; </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;catch(Exception){}
</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span></p>

<p class=2 style='margin-top:3.0pt;margin-right:0cm;margin-bottom:3.0pt;
margin-left:0cm;text-indent:20.0pt'><span style='font-family:SimSun'>&#36890;&#36807;&#20197;&#19978;&#30340;&#19968;&#20123;&#20989;&#25968;&#65292;&#23458;&#25143;&#31471;&#31243;&#24207;&#20043;&#38388;&#23601;&#21487;&#20197;&#36827;&#34892;&#33258;&#30001;&#22320;&#32842;&#22825;&#20102;&#65292;&#21508;&#20010;&#29992;&#25143;&#20043;&#38388;&#36824;&#21487;&#20197;&#20114;&#30456;&#21457;&#36865;&#24708;&#24708;&#35805;&#12290;&#25152;&#20197;&#31243;&#24207;&#24050;&#32463;&#23454;&#29616;&#20102;&#32842;&#22825;&#23460;&#30340;&#22522;&#26412;&#21151;&#33021;&#20102;&#65292;&#19981;&#36807;&#26368;&#21518;&#21508;&#20010;&#29992;&#25143;&#36824;&#35201;&#27491;&#24120;&#22320;&#36864;&#20986;&#65292;&#37027;&#23601;&#35201;&#29992;&#21040;</span><span
lang=EN-US>QuitChat</span><span style='font-family:SimSun'>&#65288;&#65289;&#20989;&#25968;&#20102;&#12290;&#35813;&#20989;&#25968;&#30340;&#20855;&#20307;&#23454;&#29616;&#22914;&#19979;&#65306;</span>
</p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>private void QuitChat() </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(connected)
</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;try
</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;string
command = &quot;GONE|&quot; + clientname; </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Byte[]
outbytes = System.Text.Encoding.ASCII.GetBytes(command.ToCharArray()); </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ns.Write(outbytes,0,outbytes.Length);
</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; clientsocket.Close();
</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; catch(Exception)&nbsp;
{}</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }
</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(logging)
</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; logwriter.Close();
</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(receive != null &amp;&amp; receive.IsAlive) </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; receive.Abort();
</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; this.Text
= &quot;</span><span style='font-family:SimSun'>&#23458;&#25143;&#31471;</span><span
lang=EN-US>&quot;; </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>} </span></p>

<p class=2 style='margin-top:3.0pt;text-indent:19.6pt'><span style='font-family:
SimSun;letter-spacing:-.1pt'>&#21040;&#27492;&#20026;&#27490;&#65292;&#23458;&#25143;&#31471;&#31243;&#24207;&#30340;&#20027;&#35201;&#37096;&#20998;&#37117;&#24050;&#32463;&#20171;&#32461;&#23436;&#27605;&#12290;&#36824;&#26377;&#19968;&#20123;&#25353;&#38062;&#25511;&#20214;&#30340;&#28040;&#24687;&#22788;&#29702;&#20989;&#25968;&#21487;&#20197;&#21442;&#35265;&#28304;&#20195;&#30721;&#12290;&#21516;&#26102;&#65292;&#31243;&#24207;&#20013;&#36824;&#26377;&#19968;&#20010;&#32842;&#22825;&#35760;&#24405;&#21151;&#33021;&#65292;&#35813;&#21151;&#33021;&#21644;&#29616;&#22312;&#27969;&#34892;&#30340;&#32842;&#22825;&#36719;&#20214;&#30340;&#35760;&#24405;&#21151;&#33021;&#31867;&#20284;&#12290;</span></p>

<p class=2 style='text-indent:20.0pt'><span style='font-family:SimSun'>&#20197;&#19978;&#20195;&#30721;&#21450;&#35774;&#35745;&#26041;&#27861;&#20165;&#26159;&#19968;&#31181;&#24605;&#36335;&#65292;&#23436;&#25972;&#20195;&#30721;&#31034;&#20363;&#35831;&#21442;&#32771;&#20195;&#30721;&#30424;&#20013;&#30340;</span><span
lang=EN-US>Chat</span><span style='font-family:SimSun'>&#39033;&#30446;&#25991;&#20214;&#12290;</span></p>

<h3 style='margin-top:6.0pt;margin-right:0cm;margin-bottom:6.0pt;margin-left:
0cm'><a name="_Toc239234796"></a><a name="_Toc240797503"></a><a
name="_Toc240800586"></a><span
 lang=EN-US>20.1.2</span><span lang=EN-US>&nbsp; System.Net </span><span
style='font-family:SimHei'>&#31354;&#38388;&#20013;&#30340;&#23545;&#35937;</span></h3>

<p class=2 style='text-indent:20.0pt'><span lang=EN-US>Visual C</span><span
style='font-family:SimSun'>&#65283;&#20351;&#29992;&#30340;&#31867;&#24211;&#26159;</span><span
lang=EN-US>.Net</span><span style='font-family:SimSun'>&#26694;&#26550;&#20026;&#25152;&#26377;&#24320;&#21457;</span><span
lang=EN-US>.Net</span><span style='font-family:SimSun'>&#24179;&#21488;&#31243;&#24207;&#35821;&#35328;&#25552;&#20379;&#30340;&#19968;&#20010;&#20844;&#29992;&#30340;&#31867;&#24211;</span><span
lang=EN-US>.Net FrameWork SDK</span><span style='font-family:SimSun'>&#12290;</span><span
lang=EN-US>Visual C</span><span style='font-family:SimSun'>&#65283;&#20027;&#35201;&#32593;&#32476;&#21151;&#33021;&#20027;&#35201;&#20351;&#29992;</span><span
lang=EN-US>.Net FrameWork SDK</span><span style='font-family:SimSun'>&#20013;&#30340;&#25552;&#20379;&#30340;&#20108;&#20010;&#21629;&#21517;&#31354;&#38388;</span><span
lang=EN-US>&#8220;System.Net.Sockets&#8221;</span><span style='font-family:
SimSun'>&#21644;</span><span lang=EN-US>&#8220;System.Net&#8221;</span><span
style='font-family:SimSun'>&#12290;</span></p>

<p class=2 style='text-indent:20.0pt'><span style='font-family:SimSun'>&#32780;&#23454;&#29616;</span><span
lang=EN-US>Socket</span><span style='font-family:SimSun'>&#20351;&#29992;&#30340;&#26159;&#21629;&#21517;&#31354;&#38388;</span><span
lang=EN-US>&#8220;System.Net.Sockets&#8221;</span><span style='font-family:
SimSun'>&#20013;&#30340;</span><span lang=EN-US>Socket</span><span
style='font-family:SimSun'>&#31867;&#12290;</span><span lang=EN-US>Visual C</span><span
style='font-family:SimSun'>&#65283;&#36890;&#36807;&#21019;&#24314;</span><span
lang=EN-US>Socket</span><span style='font-family:SimSun'>&#31867;&#30340;&#23454;&#20363;&#26469;&#23454;&#29616;</span><span
lang=EN-US>Socket</span><span style='font-family:SimSun'>&#30340;&#25176;&#31649;&#29256;&#26412;&#12290;&#22312;</span><span
lang=EN-US>Visual C</span><span style='font-family:SimSun'>&#65283;&#20013;&#21019;&#24314;&#23436;</span><span
lang=EN-US>Socket</span><span style='font-family:SimSun'>&#23454;&#20363;&#21518;&#65292;&#21487;&#20197;&#36890;&#36807;&#27492;</span><span
lang=EN-US>Socket</span><span style='font-family:SimSun'>&#23454;&#20363;&#30340;</span><span
lang=EN-US>Bind</span><span style='font-family:SimSun'>&#26041;&#27861;&#32465;&#23450;&#21040;&#32593;&#32476;&#20013;&#25351;&#23450;&#30340;&#32456;&#32467;&#28857;&#65292;&#20063;&#21487;&#20197;&#36890;&#36807;&#20854;</span><span
lang=EN-US>Connect</span><span style='font-family:SimSun'>&#26041;&#27861;&#21521;&#25351;&#23450;&#30340;&#32456;&#32467;&#28857;&#24314;&#31435;&#30340;&#36830;&#25509;&#12290;&#36830;&#25509;&#21019;&#24314;&#23436;&#27605;&#65292;&#23601;&#21487;&#20197;&#20351;&#29992;&#20854;</span><span
lang=EN-US>Send</span><span style='font-family:SimSun'>&#25110;</span><span
lang=EN-US>SendTo</span><span style='font-family:SimSun'>&#26041;&#27861;&#23558;&#25968;&#25454;&#21457;&#36865;&#21040;</span><span
lang=EN-US>Socket</span><span style='font-family:SimSun'>&#12290;</span></p>

<p class=2 style='text-indent:20.0pt'><span style='font-family:SimSun'>&#21516;&#26679;&#20351;&#29992;&#20854;&#30340;</span><span
lang=EN-US>Receive</span><span style='font-family:SimSun'>&#25110;</span><span
lang=EN-US>ReceiveFrom</span><span style='font-family:SimSun'>&#26041;&#27861;&#20174;</span><span
lang=EN-US>Socket</span><span style='font-family:SimSun'>&#20013;&#35835;&#21462;&#25968;&#25454;&#12290;&#22312;</span><span
lang=EN-US>Socket</span><span style='font-family:SimSun'>&#20351;&#29992;&#23436;&#27605;&#21518;&#65292;&#35831;&#20351;&#29992;&#20854;&#30340;</span><span
lang=EN-US>Shutdown</span><span style='font-family:SimSun'>&#26041;&#27861;&#31105;&#29992;</span><span
lang=EN-US>Socket</span><span style='font-family:SimSun'>&#65292;&#24182;&#20351;&#29992;</span><span
lang=EN-US>Close</span><span style='font-family:SimSun'>&#26041;&#27861;&#20851;&#38381;</span><span
lang=EN-US>Socket</span><span style='font-family:SimSun'>&#12290;&#34920;</span><span
lang=EN-US>20-1</span><span style='font-family:SimSun'>&#21644;&#34920;</span><span
lang=EN-US>20-2</span><span style='font-family:SimSun'>&#26159;</span><span
lang=EN-US>Socket</span><span style='font-family:SimSun'>&#31867;&#20013;&#30340;&#24120;&#29992;&#23646;&#24615;&#21644;&#26041;&#27861;&#21450;&#20854;&#31616;&#35201;&#35828;&#26126;&#12290;</span>
</p>

<p class=a7 style='margin-top:4.5pt;margin-right:0cm;margin-bottom:3.0pt;
margin-left:0cm'><span style='font-family:SimHei'>&#34920;</span><span
lang=EN-US>20-1&nbsp; Socket</span><span style='font-family:SimHei'>&#31867;&#30340;&#24120;&#29992;&#23646;&#24615;&#21450;&#20854;&#35828;&#26126;</span></p>

<div align=center>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0 width=556
 style='width:416.75pt;border-collapse:collapse;border:none'>
 <tr>
  <td width="23%" valign=top style='width:23.32%;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=af1 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:0cm'><span style='font-family:SimSun'>&#23646;</span><span
  lang=EN-US>&nbsp;&nbsp;&nbsp; </span><span style='font-family:SimSun'>&#24615;</span></p>
  </td>
  <td width="76%" valign=top style='width:76.68%;border-top:solid windowtext 1.0pt;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=af1 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:0cm'><span style='font-family:SimSun'>&#35828;</span><span
  lang=EN-US>&nbsp;&nbsp;&nbsp; </span><span style='font-family:SimSun'>&#26126;</span></p>
  </td>
 </tr>
 <tr>
  <td width="23%" valign=top style='width:23.32%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span lang=EN-US>AddressFamily</span></p>
  </td>
  <td width="76%" valign=top style='width:76.68%;border:none;border-bottom:
  solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span style='font-family:SimSun'>&#33719;&#21462;</span><span
  lang=EN-US>Socket</span><span style='font-family:SimSun'>&#30340;<a>&#22320;&#22336;&#26063;&#12290;</a></span><span
  class=MsoCommentReference><span lang=EN-US style='font-size:10.5pt'><a
  class=msocomanchor id="_anchor_1"
  onmouseover="msoCommentShow('_anchor_1','_com_1')"
  onmouseout="msoCommentHide('_com_1')" href="#_msocom_1" language=JavaScript
  name="_msoanchor_1"><font face=&#23435;&#20307;>[&#38632;&#26519;&#26408;&#39118;1]</font></a>&nbsp;</span></span></p>
  </td>
 </tr>
 <tr>
  <td width="23%" valign=top style='width:23.32%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span lang=EN-US>Available</span></p>
  </td>
  <td width="76%" valign=top style='width:76.68%;border:none;border-bottom:
  solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span style='font-family:SimSun'>&#33719;&#21462;&#24050;&#32463;&#20174;</span><span
  lang=EN-US><a href="http://www.newasp.cn/" target="_blank"><span lang=EN-US
  style='font-family:SimSun;color:windowtext;text-decoration:none'><span
  lang=EN-US>&#32593;&#32476;</span></span></a></span><span style='font-family:
  SimSun'>&#25509;&#25910;&#19988;&#21487;&#20379;&#35835;&#21462;&#30340;&#25968;&#25454;&#37327;&#12290;</span></p>
  </td>
 </tr>
 <tr>
  <td width="23%" valign=top style='width:23.32%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span lang=EN-US>Blocking</span></p>
  </td>
  <td width="76%" valign=top style='width:76.68%;border:none;border-bottom:
  solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span style='font-family:SimSun'>&#33719;&#21462;&#25110;&#35774;&#32622;&#19968;&#20010;&#20540;&#65292;&#35813;&#20540;&#25351;&#31034;</span><span
  lang=EN-US>Socket</span><span style='font-family:SimSun'>&#26159;&#21542;&#22788;&#20110;&#38459;&#22622;&#27169;&#24335;&#12290;</span></p>
  </td>
 </tr>
 <tr>
  <td width="23%" valign=top style='width:23.32%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span lang=EN-US>Connected</span></p>
  </td>
  <td width="76%" valign=top style='width:76.68%;border:none;border-bottom:
  solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span style='font-family:SimSun'>&#33719;&#21462;&#19968;&#20010;&#20540;&#65292;&#35813;&#20540;&#25351;&#31034;</span><span
  lang=EN-US>Socket</span><span style='font-family:SimSun'>&#26159;&#21542;&#24050;&#36830;&#25509;&#21040;&#36828;&#31243;&#36164;&#28304;&#12290;</span></p>
  </td>
 </tr>
 <tr>
  <td width="23%" valign=top style='width:23.32%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span lang=EN-US>Handle</span></p>
  </td>
  <td width="76%" valign=top style='width:76.68%;border:none;border-bottom:
  solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span style='font-family:SimSun'>&#33719;&#21462;</span><span
  lang=EN-US>Socket</span><span style='font-family:SimSun'>&#30340;&#25805;&#20316;&#31995;&#32479;&#21477;&#26564;&#12290;</span></p>
  </td>
 </tr>
 <tr>
  <td width="23%" valign=top style='width:23.32%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span lang=EN-US>LocalEndPoint</span></p>
  </td>
  <td width="76%" valign=top style='width:76.68%;border:none;border-bottom:
  solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span style='font-family:SimSun'>&#33719;&#21462;&#26412;&#22320;&#32456;&#32467;&#28857;&#12290;</span></p>
  </td>
 </tr>
 <tr>
  <td width="23%" valign=top style='width:23.32%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span lang=EN-US>ProtocolType</span></p>
  </td>
  <td width="76%" valign=top style='width:76.68%;border:none;border-bottom:
  solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span style='font-family:SimSun'>&#33719;&#21462;</span><span
  lang=EN-US>Socket</span><span style='font-family:SimSun'>&#30340;&#21327;&#35758;&#31867;&#22411;&#12290;</span></p>
  </td>
 </tr>
 <tr>
  <td width="23%" valign=top style='width:23.32%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span lang=EN-US>RemoteEndPoint</span></p>
  </td>
  <td width="76%" valign=top style='width:76.68%;border:none;border-bottom:
  solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span style='font-family:SimSun'>&#33719;&#21462;&#36828;&#31243;&#32456;&#32467;&#28857;&#12290;</span></p>
  </td>
 </tr>
 <tr>
  <td width="23%" valign=top style='width:23.32%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span lang=EN-US>SocketType</span></p>
  </td>
  <td width="76%" valign=top style='width:76.68%;border:none;border-bottom:
  solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span style='font-family:SimSun'>&#33719;&#21462;</span><span
  lang=EN-US>Socket</span><span style='font-family:SimSun'>&#30340;&#31867;&#22411;&#12290;</span></p>
  </td>
 </tr>
</table>

</div>

<p class=a7 style='margin-top:4.5pt;margin-right:0cm;margin-bottom:3.0pt;
margin-left:0cm'><span style='font-family:SimHei'>&#34920;</span><span
lang=EN-US>20-2&nbsp; Socket</span><span style='font-family:SimHei'>&#31867;&#30340;&#24120;&#29992;&#26041;&#27861;&#21450;&#20854;&#35828;&#26126;</span></p>

<div align=center>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0 width=556
 style='width:416.75pt;border-collapse:collapse;border:none'>
 <tr>
  <td width="26%" valign=top style='width:26.58%;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=af1 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:0cm'><span style='font-family:SimSun'>&#26041;</span><span
  lang=EN-US>&nbsp;&nbsp;&nbsp; </span><span style='font-family:SimSun'>&#27861;</span></p>
  </td>
  <td width="73%" valign=top style='width:73.42%;border-top:solid windowtext 1.0pt;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=af1 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:0cm'><span style='font-family:SimSun'>&#35828;</span><span
  lang=EN-US>&nbsp;&nbsp;&nbsp; </span><span style='font-family:SimSun'>&#26126;</span></p>
  </td>
 </tr>
 <tr>
  <td width="26%" valign=top style='width:26.58%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span lang=EN-US>Accept</span></p>
  </td>
  <td width="73%" valign=top style='width:73.42%;border:none;border-bottom:
  solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span style='font-family:SimSun'>&#21019;&#24314;&#26032;&#30340;</span><span
  lang=EN-US>Socket</span><span style='font-family:SimSun'>&#20197;&#22788;&#29702;&#20256;&#20837;&#30340;&#36830;&#25509;&#35831;&#27714;&#12290;</span></p>
  </td>
 </tr>
 <tr>
  <td width="26%" valign=top style='width:26.58%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span lang=EN-US>BeginAccept</span></p>
  </td>
  <td width="73%" valign=top style='width:73.42%;border:none;border-bottom:
  solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span style='font-family:SimSun'>&#24320;&#22987;&#19968;&#20010;&#24322;&#27493;&#35831;&#27714;&#65292;&#20197;&#21019;&#24314;&#26032;&#30340;</span><span
  lang=EN-US>Socket</span><span style='font-family:SimSun'>&#26469;&#25509;&#21463;&#20256;&#20837;&#30340;&#36830;&#25509;&#35831;&#27714;&#12290;</span></p>
  </td>
 </tr>
 <tr>
  <td width="26%" valign=top style='width:26.58%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span lang=EN-US>BeginConnect</span></p>
  </td>
  <td width="73%" valign=top style='width:73.42%;border:none;border-bottom:
  solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span style='font-family:SimSun'>&#24320;&#22987;&#23545;</span><span
  lang=EN-US><a href="http://www.newasp.cn/" target="_blank"><span lang=EN-US
  style='font-family:SimSun;color:windowtext;text-decoration:none'><span
  lang=EN-US>&#32593;&#32476;</span></span></a></span><span style='font-family:
  SimSun'>&#35774;&#22791;&#36830;&#25509;&#30340;&#24322;&#27493;&#35831;&#27714;&#12290;</span></p>
  </td>
 </tr>
 <tr>
  <td width="26%" valign=top style='width:26.58%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span lang=EN-US>BeginReceive</span></p>
  </td>
  <td width="73%" valign=top style='width:73.42%;border:none;border-bottom:
  solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span style='font-family:SimSun'>&#24320;&#22987;&#20174;&#36830;&#25509;&#30340;</span><span
  lang=EN-US>Socket</span><span style='font-family:SimSun'>&#20013;&#24322;&#27493;&#25509;&#25910;&#25968;&#25454;&#12290;</span></p>
  </td>
 </tr>
 <tr>
  <td width="26%" valign=top style='width:26.58%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span lang=EN-US>BeginReceiveFrom</span></p>
  </td>
  <td width="73%" valign=top style='width:73.42%;border:none;border-bottom:
  solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span style='font-family:SimSun'>&#24320;&#22987;&#20174;&#25351;&#23450;</span><span
  lang=EN-US><a href="http://www.newasp.cn/" target="_blank"><span lang=EN-US
  style='font-family:SimSun;color:windowtext;text-decoration:none'><span
  lang=EN-US>&#32593;&#32476;</span></span></a></span><span style='font-family:
  SimSun'>&#35774;&#22791;&#20013;&#24322;&#27493;&#25509;&#25910;&#25968;&#25454;&#12290;</span></p>
  </td>
 </tr>
 <tr>
  <td width="26%" valign=top style='width:26.58%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span lang=EN-US>BeginSend</span></p>
  </td>
  <td width="73%" valign=top style='width:73.42%;border:none;border-bottom:
  solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><a><span style='font-family:SimSun'>&#23558;&#25968;&#25454;&#24322;&#27493;&#21457;&#36865;&#21040;&#36830;&#25509;&#30340;</span></a><span
  class=MsoCommentReference><span lang=EN-US style='font-size:10.5pt'><a
  class=msocomanchor id="_anchor_2"
  onmouseover="msoCommentShow('_anchor_2','_com_2')"
  onmouseout="msoCommentHide('_com_2')" href="#_msocom_2" language=JavaScript
  name="_msoanchor_2"><font face=&#23435;&#20307;>[&#38632;&#26519;&#26408;&#39118;2]</font></a>&nbsp;</span></span></p>
  </td>
 </tr>
 <tr>
  <td width="26%" valign=top style='width:26.58%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span lang=EN-US>BeginSendTo</span></p>
  </td>
  <td width="73%" valign=top style='width:73.42%;border:none;border-bottom:
  solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span style='font-family:SimSun'>&#21521;&#29305;&#23450;&#36828;&#31243;&#20027;&#26426;&#24322;&#27493;&#21457;&#36865;&#25968;&#25454;&#12290;</span></p>
  </td>
 </tr>
 <tr>
  <td width="26%" valign=top style='width:26.58%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span lang=EN-US>Bind</span></p>
  </td>
  <td width="73%" valign=top style='width:73.42%;border:none;border-bottom:
  solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span style='font-family:SimSun'>&#20351;</span><span
  lang=EN-US>Socket</span><span style='font-family:SimSun'>&#19982;&#19968;&#20010;&#26412;&#22320;&#32456;&#32467;&#28857;&#30456;&#20851;&#32852;&#12290;</span></p>
  </td>
 </tr>
 <tr>
  <td width="26%" valign=top style='width:26.58%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span lang=EN-US>Close</span></p>
  </td>
  <td width="73%" valign=top style='width:73.42%;border:none;border-bottom:
  solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span style='font-family:SimSun'>&#24378;&#21046;</span><span
  lang=EN-US>Socket</span><span style='font-family:SimSun'>&#36830;&#25509;&#20851;&#38381;&#12290;</span></p>
  </td>
 </tr>
 <tr>
  <td width="26%" valign=top style='width:26.58%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span lang=EN-US>Connect</span></p>
  </td>
  <td width="73%" valign=top style='width:73.42%;border:none;border-bottom:
  solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span style='font-family:SimSun'>&#24314;&#31435;&#21040;&#36828;&#31243;&#35774;&#22791;&#30340;&#36830;&#25509;&#12290;</span></p>
  </td>
 </tr>
 <tr>
  <td width="26%" valign=top style='width:26.58%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span lang=EN-US>EndAccept</span></p>
  </td>
  <td width="73%" valign=top style='width:73.42%;border:none;border-bottom:
  solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span style='font-family:SimSun'>&#32467;&#26463;&#24322;&#27493;&#35831;&#27714;&#20197;&#21019;&#24314;&#26032;&#30340;</span><span
  lang=EN-US>Socket</span><span style='font-family:SimSun'>&#26469;&#25509;&#21463;&#20256;&#20837;&#30340;&#36830;&#25509;&#35831;&#27714;</span></p>
  </td>
 </tr>
</table>

</div>

<p class=MsoNormal align=right style='margin-top:0cm;margin-right:20.0pt;
margin-bottom:4.5pt;margin-left:0cm;text-align:right;text-indent:18.0pt;
word-break:break-all'><span lang=EN-US style='font-size:9.0pt'>&nbsp;</span></p>

<p class=MsoNormal align=right style='margin-top:0cm;margin-right:20.0pt;
margin-bottom:4.5pt;margin-left:0cm;text-align:right;text-indent:18.0pt'><span
style='font-size:9.0pt;font-family:SimSun'>&#32493;</span><span lang=EN-US
style='font-size:9.0pt'>&nbsp; </span><span style='font-size:9.0pt;font-family:
SimSun'>&#34920;</span></p>

<div align=center>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0 width=556
 style='width:416.75pt;border-collapse:collapse;border:none'>
 <tr>
  <td width="26%" valign=top style='width:26.58%;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=af1 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:0cm'><span style='font-family:SimSun'>&#26041;</span><span
  lang=EN-US>&nbsp;&nbsp;&nbsp; </span><span style='font-family:SimSun'>&#27861;</span></p>
  </td>
  <td width="73%" valign=top style='width:73.42%;border-top:solid windowtext 1.0pt;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=af1 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:0cm'><span style='font-family:SimSun'>&#35828;</span><span
  lang=EN-US>&nbsp;&nbsp;&nbsp; </span><span style='font-family:SimSun'>&#26126;</span></p>
  </td>
 </tr>
 <tr>
  <td width="26%" valign=top style='width:26.58%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span lang=EN-US>EndConnect</span></p>
  </td>
  <td width="73%" valign=top style='width:73.42%;border:none;border-bottom:
  solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span style='font-family:SimSun'>&#32467;&#26463;&#25346;&#36215;&#30340;&#24322;&#27493;&#36830;&#25509;&#35831;&#27714;&#12290;</span></p>
  </td>
 </tr>
 <tr>
  <td width="26%" valign=top style='width:26.58%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span lang=EN-US>EndReceive</span></p>
  </td>
  <td width="73%" valign=top style='width:73.42%;border:none;border-bottom:
  solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span style='font-family:SimSun'>&#32467;&#26463;&#25346;&#36215;&#30340;&#24322;&#27493;&#35835;&#21462;&#12290;</span></p>
  </td>
 </tr>
 <tr>
  <td width="26%" valign=top style='width:26.58%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span lang=EN-US>EndReceiveFrom</span></p>
  </td>
  <td width="73%" valign=top style='width:73.42%;border:none;border-bottom:
  solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><a><span style='font-family:SimSun'>&#32467;&#26463;&#25346;&#36215;&#30340;&#12289;&#20174;&#29305;&#23450;&#32456;&#32467;&#28857;&#36827;&#34892;&#24322;&#27493;&#35835;&#21462;&#12290;</span></a><span
  class=MsoCommentReference><span lang=EN-US style='font-size:10.5pt'><a
  class=msocomanchor id="_anchor_3"
  onmouseover="msoCommentShow('_anchor_3','_com_3')"
  onmouseout="msoCommentHide('_com_3')" href="#_msocom_3" language=JavaScript
  name="_msoanchor_3"><font face=&#23435;&#20307;>[&#38632;&#26519;&#26408;&#39118;3]</font></a>&nbsp;</span></span></p>
  </td>
 </tr>
 <tr>
  <td width="26%" valign=top style='width:26.58%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span lang=EN-US>EndSend</span></p>
  </td>
  <td width="73%" valign=top style='width:73.42%;border:none;border-bottom:
  solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span style='font-family:SimSun'>&#32467;&#26463;&#25346;&#36215;&#30340;&#24322;&#27493;&#21457;&#36865;</span></p>
  </td>
 </tr>
 <tr>
  <td width="26%" valign=top style='width:26.58%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span lang=EN-US>EndSendTo</span></p>
  </td>
  <td width="73%" valign=top style='width:73.42%;border:none;border-bottom:
  solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span style='font-family:SimSun'>&#32467;&#26463;&#25346;&#36215;&#30340;&#12289;&#21521;&#25351;&#23450;&#20301;&#32622;&#36827;&#34892;&#30340;&#24322;&#27493;&#21457;&#36865;&#12290;</span></p>
  </td>
 </tr>
 <tr>
  <td width="26%" valign=top style='width:26.58%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span lang=EN-US>GetSocketOption</span></p>
  </td>
  <td width="73%" valign=top style='width:73.42%;border:none;border-bottom:
  solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span style='font-family:SimSun'>&#36820;&#22238;</span><span
  lang=EN-US>Socket</span><span style='font-family:SimSun'>&#36873;&#39033;&#30340;&#20540;&#12290;</span></p>
  </td>
 </tr>
 <tr>
  <td width="26%" valign=top style='width:26.58%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span lang=EN-US>IOControl</span></p>
  </td>
  <td width="73%" valign=top style='width:73.42%;border:none;border-bottom:
  solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span style='font-family:SimSun'>&#20026;</span><span
  lang=EN-US>Socket</span><span style='font-family:SimSun'>&#35774;&#32622;&#20302;&#32423;&#21035;&#25805;&#20316;&#27169;&#24335;</span></p>
  </td>
 </tr>
 <tr>
  <td width="26%" valign=top style='width:26.58%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span lang=EN-US>Listen</span></p>
  </td>
  <td width="73%" valign=top style='width:73.42%;border:none;border-bottom:
  solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span style='font-family:SimSun'>&#23558;</span><span
  lang=EN-US>Socket</span><span style='font-family:SimSun'>&#32622;&#20110;&#20390;&#21548;&#29366;&#24577;&#12290;</span></p>
  </td>
 </tr>
 <tr>
  <td width="26%" valign=top style='width:26.58%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><a><span lang=EN-US>Poll</span></a><span
  class=MsoCommentReference><span lang=EN-US style='font-size:10.5pt'><a
  class=msocomanchor id="_anchor_4"
  onmouseover="msoCommentShow('_anchor_4','_com_4')"
  onmouseout="msoCommentHide('_com_4')" href="#_msocom_4" language=JavaScript
  name="_msoanchor_4"><font face=&#23435;&#20307;>[&#38632;&#26519;&#26408;&#39118;4]</font></a>&nbsp;</span></span></p>
  </td>
  <td width="73%" valign=top style='width:73.42%;border:none;border-bottom:
  solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span lang=EN-US>&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td width="26%" valign=top style='width:26.58%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span lang=EN-US>Receive</span></p>
  </td>
  <td width="73%" valign=top style='width:73.42%;border:none;border-bottom:
  solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span style='font-family:SimSun'>&#25509;&#25910;&#26469;&#33258;&#36830;&#25509;</span><span
  lang=EN-US>Socket</span><span style='font-family:SimSun'>&#30340;&#25968;&#25454;&#12290;</span></p>
  </td>
 </tr>
 <tr>
  <td width="26%" valign=top style='width:26.58%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span lang=EN-US>ReceiveFrom</span></p>
  </td>
  <td width="73%" valign=top style='width:73.42%;border:none;border-bottom:
  solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span style='font-family:SimSun'>&#25509;&#25910;&#25968;&#25454;&#25991;&#25253;&#24182;&#23384;&#20648;&#28304;&#32456;&#32467;&#28857;&#12290;</span></p>
  </td>
 </tr>
 <tr>
  <td width="26%" valign=top style='width:26.58%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span lang=EN-US>Select</span></p>
  </td>
  <td width="73%" valign=top style='width:73.42%;border:none;border-bottom:
  solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span style='font-family:SimSun'>&#30830;&#23450;&#19968;&#20010;&#25110;&#22810;&#20010;&#22871;&#25509;&#23383;&#30340;&#29366;&#24577;&#12290;</span></p>
  </td>
 </tr>
 <tr>
  <td width="26%" valign=top style='width:26.58%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span lang=EN-US>Send</span></p>
  </td>
  <td width="73%" valign=top style='width:73.42%;border:none;border-bottom:
  solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><a><span style='font-family:SimSun'>&#23558;&#25968;&#25454;&#21457;&#36865;&#21040;&#36830;&#25509;&#30340;</span></a><span
  class=MsoCommentReference><span lang=EN-US style='font-size:10.5pt'><a
  class=msocomanchor id="_anchor_5"
  onmouseover="msoCommentShow('_anchor_5','_com_5')"
  onmouseout="msoCommentHide('_com_5')" href="#_msocom_5" language=JavaScript
  name="_msoanchor_5"><font face=&#23435;&#20307;>[&#38632;&#26519;&#26408;&#39118;5]</font></a>&nbsp;</span></span></p>
  </td>
 </tr>
 <tr>
  <td width="26%" valign=top style='width:26.58%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span lang=EN-US>SendTo</span></p>
  </td>
  <td width="73%" valign=top style='width:73.42%;border:none;border-bottom:
  solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span style='font-family:SimSun'>&#23558;&#25968;&#25454;&#21457;&#36865;&#21040;&#29305;&#23450;&#32456;&#32467;&#28857;&#12290;</span></p>
  </td>
 </tr>
 <tr>
  <td width="26%" valign=top style='width:26.58%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span lang=EN-US>SetSocketOption</span></p>
  </td>
  <td width="73%" valign=top style='width:73.42%;border:none;border-bottom:
  solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span style='font-family:SimSun'>&#35774;&#32622;</span><span
  lang=EN-US>Socket</span><span style='font-family:SimSun'>&#36873;&#39033;&#12290;</span></p>
  </td>
 </tr>
 <tr>
  <td width="26%" valign=top style='width:26.58%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span lang=EN-US>Shutdown</span></p>
  </td>
  <td width="73%" valign=top style='width:73.42%;border:none;border-bottom:
  solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=a4 style='margin-top:1.5pt;margin-right:0cm;margin-bottom:1.5pt;
  margin-left:1.0pt'><span style='font-family:SimSun'>&#31105;&#29992;&#26576;</span><span
  lang=EN-US>Socket</span><span style='font-family:SimSun'>&#19978;&#30340;&#21457;&#36865;&#21644;&#25509;&#25910;&#12290;</span></p>
  </td>
 </tr>
</table>

</div>

<p class=2 style='margin-top:4.5pt;text-indent:20.0pt'><span style='font-family:
SimSun'>&#20854;&#20013;</span><span lang=EN-US>&#8220;BeginAccept&#8221;</span><span
style='font-family:SimSun'>&#21644;</span><span lang=EN-US>&#8220;EndAccept&#8221;</span><span
style='font-family:SimSun'>&#12289;</span><span lang=EN-US>&#8220;BeginConnect&#8221;</span><span
style='font-family:SimSun'>&#21644;</span><span lang=EN-US>&#8220;EndConnect&#8221;
&#8220;BeginReceive&#8221;</span><span style='font-family:SimSun'>&#21644;</span><span
lang=EN-US>&#8220;End Receive&#8221;</span><span style='font-family:SimSun'>&#12289;</span><span
lang=EN-US>&#8220;BeginReceiveFrom&#8221;</span><span style='font-family:SimSun'>&#21644;</span><span
lang=EN-US>&#8220;EndReceiveFrom&#8221;</span><span style='font-family:SimSun'>&#12289;</span><span
lang=EN-US> &#8220;BeginSend&#8221;</span><span style='font-family:SimSun'>&#21644;</span><span
lang=EN-US>&#8220;EndSend&#8221;</span><span style='font-family:SimSun'>&#12289;</span><span
lang=EN-US>&#8220;BeginSendTo&#8221;</span><span style='font-family:SimSun'>&#21644;</span><span
lang=EN-US>&#8220;EndSendTo&#8221;</span><span style='font-family:SimSun'>&#26159;&#20845;&#32452;&#24322;&#27493;&#26041;&#27861;&#65292;&#20854;&#21151;&#33021;&#20998;&#21035;&#30456;&#24403;&#20110;</span><span
lang=EN-US>&#8220;Accept&#8221;</span><span style='font-family:SimSun'>&#12289;</span><span
lang=EN-US>&#8220;Connect&#8221;</span><span style='font-family:SimSun'>&#12289;</span><span
lang=EN-US>&#8220;Receive&#8221;</span><span style='font-family:SimSun'>&#12289;</span><span
lang=EN-US>&#8220;Receive From&#8221;</span><span style='font-family:SimSun'>&#12289;</span><span
lang=EN-US> &#8220;Send&#8221;</span><span style='font-family:SimSun'>&#21644;</span><span
lang=EN-US>&#8220;SendTo&#8221;</span><span style='font-family:SimSun'>&#26041;&#27861;&#12290;</span>
</p>

<p class=2 style='text-indent:20.0pt'><span lang=EN-US>Socket.BeginAccept </span><span
style='font-family:SimSun'>&#26041;&#27861;</span><span lang=EN-US> (Socket,
Int32, AsyncCallback, Object) </span><span style='font-family:SimSun'>&#24320;&#22987;&#24322;&#27493;&#25805;&#20316;&#20197;&#25509;&#21463;&#20174;&#25351;&#23450;&#22871;&#25509;&#23383;&#20256;&#20837;&#30340;&#36830;&#25509;&#23581;&#35797;&#24182;&#25509;&#25910;&#23458;&#25143;&#31471;&#24212;&#29992;&#31243;&#24207;&#21457;&#36865;&#30340;&#31532;&#19968;&#20010;&#25968;&#25454;&#22359;&#12290;</span></p>

<p class=2 style='text-indent:20.0pt'><span style='font-family:SimSun'>&#38754;&#21521;&#36830;&#25509;&#30340;&#21327;&#35758;&#21487;&#20197;&#20351;&#29992;</span><span
lang=EN-US> BeginAccept </span><span style='font-family:SimSun'>&#26041;&#27861;&#26469;&#24322;&#27493;&#22788;&#29702;&#20256;&#20837;&#30340;&#36830;&#25509;&#23581;&#35797;&#12290;&#20197;&#24322;&#27493;&#26041;&#24335;&#25509;&#21463;&#36830;&#25509;&#23558;&#20351;&#24744;&#33021;&#22815;&#22312;&#21333;&#29420;&#30340;&#25191;&#34892;&#32447;&#31243;&#20013;&#21457;&#36865;&#21644;&#25509;&#25910;&#25968;&#25454;&#12290;&#36890;&#36807;&#27492;&#37325;&#36733;&#65292;&#24744;&#21487;&#20197;&#22312;</span><span
lang=EN-US> acceptSocket </span><span style='font-family:SimSun'>&#21442;&#25968;&#20013;&#25351;&#23450;&#25509;&#21463;&#30340;&#22871;&#25509;&#23383;&#12290;&#22914;&#26524;&#27492;&#21442;&#25968;&#20026;</span><span
lang=EN-US> nullNothingnullptrnull </span><span style='font-family:SimSun'>&#24341;&#29992;&#65288;&#22312;</span><span
lang=EN-US> Visual Basic </span><span style='font-family:SimSun'>&#20013;&#20026;</span><span
lang=EN-US> Nothing</span><span style='font-family:SimSun'>&#65289;&#65292;&#21017;&#25509;&#21463;&#30340;&#22871;&#25509;&#23383;&#30001;</span><span
lang=EN-US> BeginAccept </span><span style='font-family:SimSun'>&#26041;&#27861;&#21019;&#24314;&#12290;&#24744;&#21487;&#20197;&#22312;</span><span
lang=EN-US> receiveSize </span><span style='font-family:SimSun'>&#21442;&#25968;&#20013;&#25351;&#23450;&#21021;&#22987;&#20256;&#36755;&#25509;&#21463;&#30340;&#23383;&#33410;&#25968;&#12290;</span></p>

<p class=2 style='text-indent:20.0pt'><span style='font-family:SimSun'>&#22312;&#35843;&#29992;</span><span
lang=EN-US> BeginAccept </span><span style='font-family:SimSun'>&#26041;&#27861;&#20043;&#21069;&#65292;&#24517;&#39035;&#35843;&#29992;</span><span
lang=EN-US> Listen </span><span style='font-family:SimSun'>&#26041;&#27861;&#26469;&#20390;&#21548;&#20256;&#20837;&#30340;&#36830;&#25509;&#35831;&#27714;&#65292;&#24182;&#23558;&#20390;&#21548;&#21040;&#30340;&#35831;&#27714;&#25918;&#20837;&#38431;&#21015;&#20013;&#12290;</span></p>

<p class=2 style='text-indent:20.0pt'><span style='font-family:SimSun'>&#24517;&#39035;&#21019;&#24314;&#23454;&#29616;</span><span
lang=EN-US> AsyncCallback </span><span style='font-family:SimSun'>&#22996;&#25176;&#30340;&#22238;&#35843;&#26041;&#27861;&#65292;&#24182;&#23558;&#20854;&#21517;&#31216;&#20256;&#36882;&#32473;</span><span
lang=EN-US> BeginAccept </span><span style='font-family:SimSun'>&#26041;&#27861;&#12290;&#33509;&#35201;&#23454;&#29616;&#36825;&#19968;&#28857;&#65292;&#33267;&#23569;&#24517;&#39035;&#36890;&#36807;</span><span
lang=EN-US> state </span><span style='font-family:SimSun'>&#21442;&#25968;&#23558;&#23454;&#26045;&#20390;&#21548;&#30340;</span><span
lang=EN-US> Socket </span><span style='font-family:SimSun'>&#23545;&#35937;&#20256;&#36882;&#32473;</span><span
lang=EN-US> BeginAccept</span><span style='font-family:SimSun'>&#12290;&#22914;&#26524;&#24744;&#30340;&#22238;&#35843;&#38656;&#35201;&#26356;&#22810;&#20449;&#24687;&#65292;&#21017;&#21487;&#20197;&#21019;&#24314;&#19968;&#20010;&#23567;&#22411;&#31867;&#26469;&#20445;&#23384;</span><span
lang=EN-US> Socket </span><span style='font-family:SimSun'>&#21644;&#20854;&#20182;&#24517;&#38656;&#30340;&#20449;&#24687;&#12290;&#36890;&#36807;</span><span
lang=EN-US> state </span><span style='font-family:SimSun'>&#21442;&#25968;&#23558;&#27492;&#31867;&#30340;&#19968;&#20010;&#23454;&#20363;&#20256;&#36882;&#32473;</span><span
lang=EN-US> BeginAccept </span><span style='font-family:SimSun'>&#26041;&#27861;&#12290;</span></p>

<p class=2 style='text-indent:20.0pt'><span style='font-family:SimSun'>&#22238;&#35843;&#26041;&#27861;&#24212;&#35843;&#29992;</span><span
lang=EN-US> EndAccept </span><span style='font-family:SimSun'>&#26041;&#27861;&#12290;&#24212;&#29992;&#31243;&#24207;&#35843;&#29992;</span><span
lang=EN-US> BeginAccept </span><span style='font-family:SimSun'>&#26102;&#65292;&#31995;&#32479;&#20351;&#29992;&#21333;&#29420;&#30340;&#32447;&#31243;&#25191;&#34892;&#25351;&#23450;&#30340;&#22238;&#35843;&#26041;&#27861;&#24182;&#22312;</span><span
lang=EN-US> EndAccept </span><span style='font-family:SimSun'>&#19978;&#19968;&#30452;&#22788;&#20110;&#38459;&#27490;&#29366;&#24577;&#65292;&#30452;&#21040;&#26816;&#32034;&#21040;&#25346;&#36215;&#30340;&#36830;&#25509;&#12290;</span></p>

<p class=2 style='text-indent:20.0pt'><span lang=EN-US>EndAccept </span><span
style='font-family:SimSun'>&#36820;&#22238;&#26032;&#30340;</span><span
lang=EN-US> Socket </span><span style='font-family:SimSun'>&#23545;&#35937;&#65292;&#20379;&#24744;&#29992;&#26469;&#21521;&#36828;&#31243;&#20027;&#26426;&#21457;&#36865;&#25968;&#25454;&#21644;&#20174;&#36828;&#31243;&#20027;&#26426;&#25509;&#25910;&#25968;&#25454;&#12290;&#19981;&#33021;&#20351;&#29992;&#36820;&#22238;&#30340;&#36825;&#20010;</span><span
lang=EN-US> Socket </span><span style='font-family:SimSun'>&#25509;&#21463;&#36830;&#25509;&#38431;&#21015;&#20013;&#30340;&#20219;&#20309;&#38468;&#21152;&#36830;&#25509;&#12290;&#22914;&#26524;&#24819;&#35201;&#22312;&#35843;&#29992;</span><span
lang=EN-US> BeginAccept </span><span style='font-family:SimSun'>&#26041;&#27861;&#21518;&#20351;&#21407;&#22987;&#32447;&#31243;&#38459;&#27490;&#65292;&#35831;&#20351;&#29992;</span><span
lang=EN-US> WaitHandle.WaitOne</span><span style='font-family:SimSun'>&#12290;&#24403;&#38656;&#35201;&#21407;&#22987;&#32447;&#31243;&#32487;&#32493;&#25191;&#34892;&#26102;&#65292;&#35831;&#22312;&#22238;&#35843;&#26041;&#27861;&#20013;&#35843;&#29992;</span><span
lang=EN-US> ManualResetEvent </span><span style='font-family:SimSun'>&#30340;</span><span
lang=EN-US> Set </span><span style='font-family:SimSun'>&#26041;&#27861;&#12290;</span></p>

<p class=2 style='margin-bottom:3.0pt;text-indent:20.0pt'><span
style='font-family:SimSun'>&#19979;&#38754;&#30340;&#20195;&#30721;&#31034;&#20363;&#25171;&#24320;&#19968;&#20010;&#22871;&#25509;&#23383;&#24182;&#25509;&#21463;&#24322;&#27493;&#36830;&#25509;&#12290;&#22312;&#27492;&#31034;&#20363;&#20013;&#65292;&#35813;&#22871;&#25509;&#23383;&#25509;&#21463;&#21069;</span><span
lang=EN-US> 10 </span><span style='font-family:SimSun'>&#20010;&#23383;&#33410;&#30340;&#25968;&#25454;&#24182;&#19988;</span><span
lang=EN-US> acceptSocket </span><span style='font-family:SimSun'>&#21442;&#25968;&#20026;</span><span
lang=EN-US> nullNothingnullptrnull </span><span style='font-family:SimSun'>&#24341;&#29992;&#65288;&#22312;</span><span
lang=EN-US> Visual Basic </span><span style='font-family:SimSun'>&#20013;&#20026;</span><span
lang=EN-US> Nothing</span><span style='font-family:SimSun'>&#65289;&#65292;&#36825;&#23558;&#24378;&#21046;</span><span
lang=EN-US> BeginAccept </span><span style='font-family:SimSun'>&#26041;&#27861;&#21019;&#24314;&#25509;&#21463;&#30340;&#22871;&#25509;&#23383;&#12290;&#25509;&#25910;&#21040;&#30340;&#23383;&#33410;&#25968;&#21644;&#25968;&#25454;&#30001;&#22238;&#35843;&#22996;&#25176;&#26174;&#31034;&#22312;&#25511;&#21046;&#21488;&#19978;&#12290;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>IPHostEntry ipHostInfo =
Dns.GetHostEntry(Dns.GetHostName());</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;
IPAddress ipAddress = ipHostInfo.AddressList[0];</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;
IPEndPoint localEndPoint = new IPEndPoint(ipAddress, 11000);</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; // </span><span
style='font-family:SimSun'>&#21019;&#24314;</span><span lang=EN-US> TCP/IP
socket.</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;
Socket listener = new Socket(AddressFamily.InterNetwork,</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
SocketType.Stream, ProtocolType.Tcp );</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; //
Bind </span><span style='font-family:SimSun'>&#26412;&#22320;&#31471;&#21475;&#24182;&#30417;&#21548;&#36827;&#20837;&#30340;&#36830;&#25509;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;
listener.Bind(localEndPoint);</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;
listener.Listen(100);</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; while
(true) </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; {</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
// </span><span style='font-family:SimSun'>&#35774;&#32622;&#20107;&#20214;&#29366;&#24577;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
allDone.Reset();</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
// </span><span style='font-family:SimSun'>&#21551;&#21160;&#31227;&#27493;&#36830;&#25509;&#30417;&#21548;&#24182;&#25509;&#25910;&#23458;&#25143;&#31471;&#25968;&#25454;</span><span
lang=EN-US>.</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Console.WriteLine(&quot;Waiting for a connection...&quot;);</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
// </span><span style='font-family:SimSun'>&#25509;&#25910;&#26469;&#33258;&#23458;&#25143;&#31471;&#30340;&#21069;</span><span
lang=EN-US>10</span><span style='font-family:SimSun'>&#20010;&#23383;&#33410;&#30340;&#25968;&#25454;</span>
</p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
// BeginAccept() </span><span style='font-family:SimSun'>&#21019;&#24314;&#25509;&#25910;&#22871;&#25509;&#23383;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
int receivedDataSize = 10;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
listener.BeginAccept(null, receivedDataSize, new
AsyncCallback(AcceptReceiveDataCallback), listener);</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
// </span><span style='font-family:SimSun'>&#31561;&#24453;&#22788;&#29702;&#19968;&#20010;&#36830;&#25509;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
allDone.WaitOne();</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; }</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>}</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>public static void
AcceptReceiveDataCallback(IAsyncResult ar) </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>{</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; // </span><span
style='font-family:SimSun'>&#36820;&#22238;&#23458;&#25143;&#31471;&#22871;&#25509;&#23383;&#35831;&#27714;</span><span
lang=EN-US>.</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;
Socket listener = (Socket) ar.AsyncState;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; // </span><span
style='font-family:SimSun'>&#32467;&#26463;&#25805;&#20316;&#24182;&#26174;&#31034;&#25509;&#25910;&#30340;&#25968;&#25454;</span><span
lang=EN-US>.</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;
byte[] Buffer;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; int
bytesTransferred;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;
Socket handler = listener.EndAccept(out Buffer, out bytesTransferred, ar);</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;
string stringTransferred = Encoding.ASCII.GetString(Buffer, 0,
bytesTransferred);</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;
Console.WriteLine(stringTransferred);</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;
Console.WriteLine(&quot;Size of data transferred is {0}&quot;,
bytesTransferred);</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; // </span><span
style='font-family:SimSun'>&#21019;&#24314;&#24322;&#27493;&#25509;&#25910;&#29366;&#24577;&#23545;&#35937;</span><span
lang=EN-US>.</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;
StateObject state = new StateObject();</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;
state.workSocket = handler;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;
handler.BeginReceive( state.buffer, 0, StateObject.BufferSize, 0,</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; new
AsyncCallback(ReadCallback), state);</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>}</span></p>

<p class=2 style='margin-top:3.0pt;text-indent:20.0pt'><span lang=EN-US>&nbsp;</span></p>

<p class=2 style='margin-top:3.0pt;text-indent:20.0pt'><span lang=EN-US>Socket.BeginSend
</span><span style='font-family:SimSun'>&#26041;&#27861;&#23558;&#25968;&#25454;&#24322;&#27493;&#21457;&#36865;&#21040;&#36830;&#25509;&#30340;</span><span
lang=EN-US> Socket</span><span style='font-family:SimSun'>&#12290;</span><span
lang=EN-US>BeginSend </span><span style='font-family:SimSun'>&#26041;&#27861;&#21487;&#23545;&#22312;</span><span
lang=EN-US> Connect</span><span style='font-family:SimSun'>&#12289;</span><span
lang=EN-US>BeginConnect</span><span style='font-family:SimSun'>&#12289;</span><span
lang=EN-US>Accept </span><span style='font-family:SimSun'>&#25110;</span><span
lang=EN-US> BeginAccept </span><span style='font-family:SimSun'>&#26041;&#27861;&#20013;&#24314;&#31435;&#30340;&#36828;&#31243;&#20027;&#26426;&#21551;&#21160;&#24322;&#27493;&#21457;&#36865;&#25805;&#20316;&#12290;&#22914;&#26524;&#27809;&#26377;&#39318;&#20808;&#35843;&#29992;</span><span
lang=EN-US> Accept</span><span style='font-family:SimSun'>&#12289;</span><span
lang=EN-US>BeginAccept</span><span style='font-family:SimSun'>&#12289;</span><span
lang=EN-US>Connect </span><span style='font-family:SimSun'>&#25110;</span><span
lang=EN-US> BeginConnect</span><span style='font-family:SimSun'>&#65292;&#21017;</span><span
lang=EN-US> BeginSend </span><span style='font-family:SimSun'>&#23558;&#20250;&#24341;&#21457;&#24322;&#24120;&#12290;&#35843;&#29992;</span><span
lang=EN-US> BeginSend </span><span style='font-family:SimSun'>&#26041;&#27861;&#23558;&#20351;&#24744;&#33021;&#22815;&#22312;&#21333;&#29420;&#30340;&#25191;&#34892;&#32447;&#31243;&#20013;&#21457;&#36865;&#25968;&#25454;&#12290;</span></p>

<p class=2 style='text-indent:20.0pt'><span style='font-family:SimSun'>&#24744;&#21487;&#20197;&#21019;&#24314;&#19968;&#20010;&#23454;&#29616;</span><span
lang=EN-US> AsyncCallback </span><span style='font-family:SimSun'>&#22996;&#25176;&#30340;&#22238;&#35843;&#26041;&#27861;&#24182;&#23558;&#23427;&#30340;&#21517;&#31216;&#20256;&#36882;&#32473;</span><span
lang=EN-US> BeginSend </span><span style='font-family:SimSun'>&#26041;&#27861;&#12290;&#20026;&#27492;&#65292;&#24744;&#30340;</span><span
lang=EN-US> state </span><span style='font-family:SimSun'>&#21442;&#25968;&#33267;&#23569;&#24517;&#39035;&#21253;&#21547;&#29992;&#20110;&#36890;&#20449;&#30340;&#24050;&#36830;&#25509;&#25110;&#40664;&#35748;</span><span
lang=EN-US> Socket</span><span style='font-family:SimSun'>&#12290;&#22914;&#26524;&#22238;&#35843;&#38656;&#35201;&#26356;&#22810;&#20449;&#24687;&#65292;&#21017;&#21487;&#20197;&#21019;&#24314;&#19968;&#20010;&#23567;&#22411;&#31867;&#25110;&#32467;&#26500;&#65292;&#29992;&#20110;&#20445;&#23384;</span><span
lang=EN-US> Socket </span><span style='font-family:SimSun'>&#21644;&#20854;&#20182;&#25152;&#38656;&#30340;&#20449;&#24687;&#12290;&#36890;&#36807;</span><span
lang=EN-US> state </span><span style='font-family:SimSun'>&#21442;&#25968;&#23558;&#27492;&#31867;&#30340;&#19968;&#20010;&#23454;&#20363;&#20256;&#36882;&#32473;</span><span
lang=EN-US> BeginSend </span><span style='font-family:SimSun'>&#26041;&#27861;&#12290;</span></p>

<p class=2 style='text-indent:20.0pt'><span style='font-family:SimSun'>&#22238;&#35843;&#26041;&#27861;&#24212;&#35843;&#29992;</span><span
lang=EN-US> EndSend </span><span style='font-family:SimSun'>&#26041;&#27861;&#12290;&#24403;&#24212;&#29992;&#31243;&#24207;&#35843;&#29992;</span><span
lang=EN-US> BeginSend </span><span style='font-family:SimSun'>&#26102;&#65292;&#31995;&#32479;&#23558;&#20351;&#29992;&#19968;&#20010;&#21333;&#29420;&#30340;&#32447;&#31243;&#26469;&#25191;&#34892;&#25351;&#23450;&#30340;&#22238;&#35843;&#26041;&#27861;&#65292;&#24182;&#38459;&#27490;</span><span
lang=EN-US> EndSend</span><span style='font-family:SimSun'>&#65292;&#30452;&#21040;</span><span
lang=EN-US> Socket </span><span style='font-family:SimSun'>&#21457;&#36865;&#20102;&#35831;&#27714;&#30340;&#23383;&#33410;&#25968;&#25110;&#24341;&#21457;&#20102;&#24322;&#24120;&#20026;&#27490;&#12290;&#22914;&#26524;&#24076;&#26395;&#22312;&#35843;&#29992;</span><span
lang=EN-US> BeginSend </span><span style='font-family:SimSun'>&#26041;&#27861;&#20043;&#21518;&#20351;&#21407;&#22987;&#32447;&#31243;&#38459;&#27490;&#65292;<a>&#35831;&#20351;&#29992;</a></span><span
lang=EN-US> WaitHandle..::.WaitOne </span><span style='font-family:SimSun'>&#26041;&#27861;&#12290;</span><span
class=MsoCommentReference><span lang=EN-US style='font-size:10.5pt'><a
class=msocomanchor id="_anchor_6"
onmouseover="msoCommentShow('_anchor_6','_com_6')"
onmouseout="msoCommentHide('_com_6')" href="#_msocom_6" language=JavaScript
name="_msoanchor_6"><font face=&#23435;&#20307;>[&#38632;&#26519;&#26408;&#39118;6]</font></a>&nbsp;</span></span><span
style='font-family:SimSun'>&#24403;&#38656;&#35201;&#21407;&#22987;&#32447;&#31243;&#32487;&#32493;&#25191;&#34892;&#26102;&#65292;&#35831;&#22312;&#22238;&#35843;&#26041;&#27861;&#20013;&#35843;&#29992;</span><span
lang=EN-US> T:System.Threading.ManualResetEvent </span><span style='font-family:
SimSun'>&#30340;</span><span lang=EN-US> Set </span><span style='font-family:
SimSun'>&#26041;&#27861;&#12290;</span></p>

<p class=2 style='text-indent:20.0pt'><span style='font-family:SimSun'>&#34429;&#28982;</span><span
lang=EN-US> BeginSend </span><span style='font-family:SimSun'>&#26159;&#29992;&#20110;&#38754;&#21521;&#36830;&#25509;&#30340;&#21327;&#35758;&#30340;&#65292;&#20294;&#20551;&#22914;&#24744;&#39318;&#20808;&#35843;&#29992;</span><span
lang=EN-US> Connect </span><span style='font-family:SimSun'>&#25110;</span><span
lang=EN-US> BeginConnect </span><span style='font-family:SimSun'>&#26041;&#27861;&#26469;&#24314;&#31435;&#40664;&#35748;&#36828;&#31243;&#20027;&#26426;&#65292;&#21017;&#23427;&#20063;&#21487;&#29992;&#20110;&#26080;&#36830;&#25509;&#21327;&#35758;&#12290;&#22914;&#26524;&#24744;&#20351;&#29992;&#30340;&#26159;&#26080;&#36830;&#25509;&#21327;&#35758;&#65292;&#24182;&#19988;&#25171;&#31639;&#23558;&#25968;&#25454;&#21457;&#36865;&#21040;&#33509;&#24178;&#19981;&#21516;&#30340;&#20027;&#26426;&#65292;&#21017;&#24212;&#20351;&#29992;</span><span
lang=EN-US> BeginSendTo</span><span style='font-family:SimSun'>&#12290;&#21363;&#20351;&#24050;&#32463;&#29992;</span><span
lang=EN-US> Connect </span><span style='font-family:SimSun'>&#24314;&#31435;&#20102;&#40664;&#35748;&#36828;&#31243;&#20027;&#26426;&#65292;&#20063;&#21487;&#20197;&#20351;&#29992;</span><span
lang=EN-US> BeginSendTo</span><span style='font-family:SimSun'>&#12290;&#36890;&#36807;&#20877;&#27425;&#35843;&#29992;</span><span
lang=EN-US> Connect </span><span style='font-family:SimSun'>&#25110;</span><span
lang=EN-US> BeginConnect</span><span style='font-family:SimSun'>&#65292;&#21487;&#20197;&#22312;&#35843;&#29992;</span><span
lang=EN-US> BeginSend </span><span style='font-family:SimSun'>&#20043;&#21069;&#26356;&#25913;&#40664;&#35748;&#36828;&#31243;&#20027;&#26426;&#12290;&#22914;&#26524;&#20351;&#29992;&#26080;&#36830;&#25509;&#21327;&#35758;&#65292;&#21017;&#24517;&#39035;&#30830;&#20445;&#32531;&#20914;&#21306;&#30340;&#22823;&#23567;&#19981;&#20250;&#36229;&#36807;&#22522;&#30784;&#26381;&#21153;&#25552;&#20379;&#31243;&#24207;&#30340;&#26368;&#22823;&#25968;&#25454;&#21253;&#22823;&#23567;&#12290;&#22914;&#26524;&#36229;&#20986;&#65292;&#21017;&#19981;&#20250;&#21457;&#36865;&#25968;&#25454;&#25253;&#65292;&#24182;&#19988;</span><span
lang=EN-US> BeginSend </span><span style='font-family:SimSun'>&#23558;&#24341;&#21457;</span><span
lang=EN-US> SocketException</span><span style='font-family:SimSun'>&#12290;</span></p>

<p class=2 style='margin-bottom:3.0pt;text-indent:20.0pt'><span
style='font-family:SimSun'>&#22914;&#26524;&#23558;</span><span lang=EN-US>
DontRoute </span><span style='font-family:SimSun'>&#26631;&#24535;&#25351;&#23450;&#20026;</span><span
lang=EN-US> socketflags </span><span style='font-family:SimSun'>&#21442;&#25968;&#65292;&#21017;&#23558;&#19981;&#36335;&#30001;&#35201;&#21457;&#36865;&#30340;&#25968;&#25454;&#12290;&#19979;&#38754;&#30340;&#20195;&#30721;&#31034;&#20363;&#24320;&#22987;&#21521;&#36828;&#31243;&#20027;&#26426;&#24322;&#27493;&#21457;&#36865;&#25968;&#25454;&#12290;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>allDone.Set();</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;
Socket s = (Socket) ar.AsyncState;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;
s.EndConnect(ar);</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;
StateObject so2 = new StateObject();</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;
so2.workSocket = s;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;
byte[] buff = Encoding.ASCII.GetBytes(&quot;This is a test&quot;);</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;
s.BeginSend(buff, 0, buff.Length,0,new
AsyncCallback(Async_Send_Receive.Send_Callback), so2);&nbsp;&nbsp;&nbsp; </span></p>

<p class=2 style='margin-top:3.0pt;text-indent:20.0pt'><span style='font-family:
SimSun'>&#20351;&#29992;</span><span lang=EN-US> AsyncCallback </span><span
style='font-family:SimSun'>&#22996;&#25176;&#22312;&#19968;&#20010;&#21333;&#29420;&#30340;&#32447;&#31243;&#20013;&#22788;&#29702;&#24322;&#27493;&#25805;&#20316;&#30340;&#32467;&#26524;&#12290;</span><span
lang=EN-US>AsyncCallback </span><span style='font-family:SimSun'>&#22996;&#25176;&#34920;&#31034;&#22312;&#24322;&#27493;&#25805;&#20316;&#23436;&#25104;&#26102;&#35843;&#29992;&#30340;&#22238;&#35843;&#26041;&#27861;&#12290;&#22238;&#35843;&#26041;&#27861;&#37319;&#29992;</span><span
lang=EN-US> IAsyncResult </span><span style='font-family:SimSun'>&#21442;&#25968;&#65292;&#35813;&#21442;&#25968;&#38543;&#21518;&#21487;&#29992;&#26469;&#33719;&#21462;&#24322;&#27493;&#25805;&#20316;&#30340;&#32467;&#26524;&#12290;</span></p>

<p class=2 style='text-indent:20.0pt'><span lang=EN-US>TcpClient </span><span
style='font-family:SimSun'>&#31867;&#25552;&#20379;&#19968;&#20123;&#31616;&#21333;&#30340;&#26041;&#27861;&#65292;&#29992;&#20110;&#22312;&#21516;&#27493;&#38459;&#27490;&#27169;&#24335;&#19979;&#36890;&#36807;&#32593;&#32476;&#26469;&#36830;&#25509;&#12289;&#21457;&#36865;&#21644;&#25509;&#25910;&#27969;&#25968;&#25454;&#12290;</span></p>

<p class=2 style='text-indent:20.0pt'><span style='font-family:SimSun'>&#20026;&#20351;</span><span
lang=EN-US> TcpClient </span><span style='font-family:SimSun'>&#36830;&#25509;&#24182;&#20132;&#25442;&#25968;&#25454;&#65292;&#20351;&#29992;</span><span
lang=EN-US> TCP ProtocolType </span><span style='font-family:SimSun'>&#21019;&#24314;&#30340;</span><span
lang=EN-US> TcpListener </span><span style='font-family:SimSun'>&#25110;</span><span
lang=EN-US> Socket </span><span style='font-family:SimSun'>&#24517;&#39035;&#20390;&#21548;&#26159;&#21542;&#26377;&#20256;&#20837;&#30340;&#36830;&#25509;&#35831;&#27714;&#12290;&#21487;&#20197;&#20351;&#29992;&#19979;&#38754;&#20004;&#31181;&#26041;&#27861;&#20043;&#19968;&#36830;&#25509;&#21040;&#35813;&#20390;&#21548;&#22120;&#65306;</span>
</p>

<p class=af6><span lang=EN-US style='font-family:Wingdings'>&sup2;<span
style='font:7.0pt "Times New Roman"'> </span></span><span style='font-family:
SimSun'>&#21019;&#24314;&#19968;&#20010;</span><span lang=EN-US> TcpClient</span><span
style='font-family:SimSun'>&#65292;&#24182;&#35843;&#29992;&#19977;&#20010;&#21487;&#29992;&#30340;</span><span
lang=EN-US> Connect </span><span style='font-family:SimSun'>&#26041;&#27861;&#20043;&#19968;&#12290;</span></p>

<p class=af6><span lang=EN-US style='font-family:Wingdings'>&sup2;<span
style='font:7.0pt "Times New Roman"'> </span></span><span style='font-family:
SimSun'>&#20351;&#29992;&#36828;&#31243;&#20027;&#26426;&#30340;&#20027;&#26426;&#21517;&#21644;&#31471;&#21475;&#21495;&#21019;&#24314;</span><span
lang=EN-US> TcpClient</span><span style='font-family:SimSun'>&#12290;&#27492;&#26500;&#36896;&#20989;&#25968;&#23558;&#33258;&#21160;&#23581;&#35797;&#19968;&#20010;&#36830;&#25509;&#12290;</span></p>

<p class=2 style='text-indent:20.0pt'><span style='font-family:SimSun'>&#35201;&#21457;&#36865;&#21644;&#25509;&#25910;&#25968;&#25454;&#65292;&#35831;&#20351;&#29992;</span><span
lang=EN-US> GetStream </span><span style='font-family:SimSun'>&#26041;&#27861;&#26469;&#33719;&#21462;&#19968;&#20010;</span><span
lang=EN-US> NetworkStream</span><span style='font-family:SimSun'>&#12290;&#35843;&#29992;</span><span
lang=EN-US> NetworkStream </span><span style='font-family:SimSun'>&#30340;</span><span
lang=EN-US> Write </span><span style='font-family:SimSun'>&#21644;</span><span
lang=EN-US> Read </span><span style='font-family:SimSun'>&#26041;&#27861;&#19982;&#36828;&#31243;&#20027;&#26426;&#20043;&#38388;&#21457;&#36865;&#21644;&#25509;&#25910;&#25968;&#25454;&#12290;&#20351;&#29992;</span><span
lang=EN-US> Close </span><span style='font-family:SimSun'>&#26041;&#27861;&#37322;&#25918;&#19982;</span><span
lang=EN-US> TcpClient </span><span style='font-family:SimSun'>&#20851;&#32852;&#30340;&#25152;&#26377;&#36164;&#28304;&#12290;</span></p>

<p class=2 style='text-indent:20.0pt'><span lang=EN-US>&nbsp;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>static void
Connect(String server, String message) </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>{</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp; try </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp; {</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; // </span><span
style='font-family:SimSun'>&#21019;&#24314;</span><span lang=EN-US> TcpClient</span><span
style='font-family:SimSun'>&#65292;&#36830;&#25509;&#21040;&#26381;&#21153;&#22120;&#31471;&#65292;&#24182;&#19988;&#20351;&#29992;&#19982;&#26381;&#21153;&#22120;&#30456;&#21516;&#30340;</span><span
lang=EN-US>IP</span><span style='font-family:SimSun'>&#22320;&#22336;&#21644;&#31471;&#21475;&#12290;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; Int32
port = 13000;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;
TcpClient client = new TcpClient(server, port);</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; // </span><span
style='font-family:SimSun'>&#20256;&#36755;</span><span lang=EN-US> ASCII </span><span
style='font-family:SimSun'>&#26684;&#24335;&#20449;&#24687;&#24182;&#23384;&#20648;&#22312;&#23383;&#33410;&#25968;&#32452;&#20013;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;
Byte[] data =
System.Text.Encoding.ASCII.GetBytes(message);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; // </span><span
style='font-family:SimSun'>&#35835;&#21462;&#24182;&#20889;&#20837;&#23458;&#25143;&#31471;&#25968;&#25454;&#27969;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp; //&nbsp;
Stream stream = client.GetStream();</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;
NetworkStream stream = client.GetStream();</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; // </span><span
style='font-family:SimSun'>&#21457;&#36865;&#20449;&#24687;&#21040;&#26381;&#21153;&#22120;&#31471;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;
stream.Write(data, 0, data.Length);</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;
Console.WriteLine(&quot;Sent: {0}&quot;, message);</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; // </span><span
style='font-family:SimSun'>&#25509;&#25910;&#26381;&#21153;&#22120;&#21709;&#24212;&#65292;&#23384;&#20648;&#21709;&#24212;&#25968;&#25454;&#21040;&#32531;&#20914;&#21306;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; data
= new Byte[256];</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;
String responseData = String.Empty;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; // </span><span
style='font-family:SimSun'>&#35835;&#21462;&#26381;&#21153;&#22120;&#30456;&#24212;&#25968;&#25454;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; Int32
bytes = stream.Read(data, 0, data.Length);</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;
responseData = System.Text.Encoding.ASCII.GetString(data, 0, bytes);</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;
Console.WriteLine(&quot;Received: {0}&quot;,
responseData);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;
stream.Close();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;
client.Close();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp; } </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp; catch
(ArgumentNullException e) </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp; {</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;
Console.WriteLine(&quot;ArgumentNullException: {0}&quot;, e);</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp; } </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp; catch
(SocketException e) </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp; {</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;
Console.WriteLine(&quot;SocketException: {0}&quot;, e);</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp; }</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;
Console.WriteLine(&quot;\n Press Enter to continue...&quot;);</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp; Console.Read();</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>}</span></p>

<h2 style='margin-top:7.55pt;margin-right:0cm;margin-bottom:7.55pt;margin-left:
0cm'><a name="_Toc239234797"></a><a name="_Toc240797504"></a><a
name="_Toc240800587"><span lang=EN-US>20.2&nbsp; </span></a><span
style='font-family:SimHei'>&#23454;&#25112;&#19968;&#20010;&#23436;&#25972;&#30340;&#32842;&#22825;&#31243;&#24207;</span></h2>

<p class=2 style='text-indent:20.0pt'><span style='font-family:SimSun'>&#22312;&#26412;&#33410;&#35762;&#36848;&#19968;&#20010;&#31616;&#21333;&#30340;&#32842;&#22825;&#24212;&#29992;&#31243;&#24207;&#65292;&#37319;&#29992;</span><span
lang=EN-US>TCP</span><span style='font-family:SimSun'>&#21327;&#35758;&#23454;&#29616;&#65288;&#22914;</span><span
lang=EN-US>UDP</span><span style='font-family:SimSun'>&#31561;&#65289;&#12290;&#34429;&#28982;&#21487;&#20197;&#37319;&#29992;&#22810;&#31181;&#21327;&#35758;&#26041;&#24335;&#23454;&#29616;&#32842;&#22825;&#31243;&#24207;&#65292;&#20294;&#26412;&#33410;&#23558;&#37325;&#28857;&#20171;&#32461;&#24120;&#29992;&#30340;&#22871;&#25509;&#23383;&#32534;&#31243;&#26041;&#24335;&#65292;&#37319;&#29992;</span><span
lang=EN-US>TCP</span><span style='font-family:SimSun'>&#21327;&#35758;&#12290;</span></p>

<p class=ab style='text-indent:20.0pt'><span style='font-family:SimHei'>&#65288;</span><span
style='font-family:SimHei'>&#20195;&#30721;&#20301;&#32622;</span><span
style='font-family:SimHei'>&#65306;</span><span style='font-family:SimHei'>&#20809;&#30424;</span><span
lang=EN-US>\</span><span style='font-family:SimHei'>&#28304;&#20195;&#30721;</span><span
lang=EN-US>\chapter20\TCP Chat</span><span style='font-family:SimHei'>&#65289;</span></p>

<h3 style='margin-top:6.0pt;margin-right:0cm;margin-bottom:6.0pt;margin-left:
0cm'><a name="_Toc239234798"></a><a name="_Toc240797505"></a><a
name="_Toc240800588"></a><span
 lang=EN-US>20.2.1</span><span lang=EN-US>&nbsp; TCP</span><span
style='font-family:SimHei'>&#24322;&#27493;&#22871;&#25509;&#23383;</span></h3>

<p class=2 style='margin-bottom:3.0pt;text-indent:20.0pt'><span lang=EN-US>TCP</span><span
style='font-family:SimSun'>&#24322;&#27493;&#22871;&#25509;&#23383;&#20855;&#26377;&#24320;&#22987;&#21644;&#32467;&#26463;&#21151;&#33021;&#65292;&#27604;&#22914;</span><span
lang=EN-US>BeginConnect</span><span style='font-family:SimSun'>&#12289;</span><span
lang=EN-US>BeginAccept</span><span style='font-family:SimSun'>&#12289;</span><span
lang=EN-US>BeginSend</span><span style='font-family:SimSun'>&#21644;</span><span
lang=EN-US>BeginReceive.</span><span style='font-family:SimSun'>&#12290;&#19979;&#38754;&#30340;&#20195;&#30721;&#23454;&#29616;&#24322;&#27493;&#25509;&#25910;&#12290;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>IAsyncResult
BeginAccept(AsyncCallback callback, object state);</span></p>

<p class=2 style='margin-top:3.0pt;text-indent:20.0pt'><span lang=EN-US>AsyncCallback</span><span
style='font-family:SimSun'>&#26041;&#27861;&#22312;&#25509;&#25910;&#23436;&#27605;&#21518;&#35843;&#29992;&#12290;&#35813;&#26041;&#27861;&#20316;&#20026;&#20107;&#20214;&#26469;&#20986;&#21457;&#65292;&#36890;&#36807;&#22996;&#25176;&#26041;&#24335;&#23454;&#29616;&#12290;</span><span
lang=EN-US>.NET</span><span style='font-family:SimSun'>&#25552;&#20379;&#20102;&#19968;&#31181;&#22996;&#25176;&#26041;&#24335;&#65292;&#21487;&#20197;&#23454;&#29616;&#36825;&#19968;&#28857;&#65292;&#22312;&#21069;&#38754;&#31456;&#33410;&#24050;&#32463;&#20171;&#32461;&#36807;&#12290;</span></p>

<p class=2 style='margin-bottom:3.0pt;text-indent:20.0pt'><span lang=EN-US>.NET
AsyncCallback </span><span style='font-family:SimSun'>&#31867;&#20801;&#35768;&#21551;&#21160;&#24322;&#27493;&#26041;&#27861;&#24182;&#25552;&#20379;&#24322;&#27493;&#22996;&#25176;&#35843;&#29992;&#21151;&#33021;&#12290;&#29366;&#24577;&#23545;&#35937;&#29992;&#26469;&#22312;</span><span
lang=EN-US>BeginAccept </span><span style='font-family:SimSun'>&#21644;</span><span
lang=EN-US>AsyncCallback </span><span style='font-family:SimSun'>&#20043;&#38388;&#20570;&#20986;&#21709;&#24212;&#12290;&#19979;&#38754;&#30340;&#20195;&#30721;&#23454;&#29616;&#20102;&#36825;&#20123;&#21151;&#33021;&#12290;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>Socket sock=new
Socket(AddressFamily.InterNetwork,SocketType.Stream, ProtocolType.Tcp);</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>IPEndPoint iep = new
IPEndPoint(IPAddress.Any, 9050);</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>sock.Bind (iep);</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>sock.Listen (5);</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>sock.BeginAccept (new
AsyncCallback(CallAccept), sock);</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>private void
CallAccept(IAsyncResult iar)</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>{</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;
Socket server = (Socket)iar.AsyncState;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;
Socket client = server.EndAccept(iar);</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>}</span></p>

<p class=2 style='margin-top:3.0pt;text-indent:20.0pt'><span style='font-family:
SimSun'>&#36890;&#36807;&#20351;&#29992;</span><span lang=EN-US>AsyncState </span><span
style='font-family:SimSun'>&#23646;&#24615;&#22312;</span><span lang=EN-US>CallAccept
</span><span style='font-family:SimSun'>&#20013;&#33719;&#21462;&#28304;</span><span
lang=EN-US>socket</span><span style='font-family:SimSun'>&#23545;&#35937;&#12290;&#19968;&#26086;&#24314;&#31435;&#28304;</span><span
lang=EN-US>socket</span><span style='font-family:SimSun'>&#65292;&#23601;&#21487;&#20197;&#33719;&#21462;&#23458;&#25143;&#31471;</span><span
lang=EN-US>soket</span><span style='font-family:SimSun'>&#24182;&#25191;&#34892;&#30456;&#20851;&#25805;&#20316;&#12290;&#25152;&#26377;&#24322;&#27493;&#22871;&#25509;&#23383;&#26041;&#27861;&#37117;&#26159;&#36825;&#26679;&#30340;&#24037;&#20316;&#21407;&#29702;&#12290;</span></p>

<h3 style='margin-top:6.0pt;margin-right:0cm;margin-bottom:6.0pt;margin-left:
0cm'><a name="_Toc239234799"></a><a name="_Toc240797506"></a><a
name="_Toc240800589"></a><span
 lang=EN-US>20.2.2</span><span lang=EN-US>&nbsp; </span><span style='font-family:
SimHei'>&#20449;&#24687;&#20132;&#25442;</span></h3>

<p class=2 style='margin-bottom:3.0pt;text-indent:20.0pt'><span
style='font-family:SimSun'>&#20026;&#20102;&#23454;&#29616;&#23458;&#25143;&#26426;&#21644;&#26381;&#21153;&#22120;&#20043;&#38388;&#30340;&#20449;&#24687;&#20132;&#25442;&#65292;&#38656;&#35201;&#20351;&#29992;&#19979;&#38754;&#30340;&#21629;&#20196;&#21629;&#21517;&#12290;&#36825;&#20123;&#21629;&#20196;&#29992;&#26469;&#23454;&#29616;&#23458;&#25143;&#26426;&#21644;&#26381;&#21153;&#22120;&#20043;&#38388;&#30340;&#8220;&#20849;&#21516;&#35821;&#35328;&#8221;&#12290;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>enum Command</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>{</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; //</span><span
style='font-family:SimSun'>&#27880;&#20876;&#21040;&#26381;&#21153;&#22120;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp; <a>&nbsp;Login,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</a></span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; //</span><span
style='font-family:SimSun'>&#20174;&#26381;&#21153;&#22120;&#27880;&#38144;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;
Logout,</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; //</span><span
style='font-family:SimSun'>&#21457;&#36865;&#20449;&#24687;&#21040;&#25152;&#26377;&#23458;&#25143;&#31471;</span><span
lang=EN-US>&nbsp;&nbsp;&nbsp; </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; Message,&nbsp;&nbsp;&nbsp;
</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; //</span><span
style='font-family:SimSun'>&#33719;&#21462;&#29992;&#25143;&#21015;&#34920;</span><span
lang=EN-US>r</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; List</span><span
class=MsoCommentReference><span lang=EN-US style='font-size:10.5pt'><a
class=msocomanchor id="_anchor_7"
onmouseover="msoCommentShow('_anchor_7','_com_7')"
onmouseout="msoCommentHide('_com_7')" href="#_msocom_7" language=JavaScript
name="_msoanchor_7"><font face=&#23435;&#20307;>[&#38632;&#26519;&#26408;&#39118;7]</font></a>&nbsp;</span></span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>}</span></p>

<p class=2 style='margin-top:3.0pt;margin-right:0cm;margin-bottom:3.0pt;
margin-left:0cm;text-indent:20.0pt'><span style='font-family:SimSun'>&#20197;&#19979;&#20026;&#22312;&#23458;&#25143;&#26426;&#21644;&#26381;&#21153;&#22120;&#20043;&#38388;&#20256;&#36882;&#30340;&#20449;&#24687;&#30340;&#25968;&#25454;&#32467;&#26500;&#35828;&#26126;&#12290;</span><span
lang=EN-US>Socket </span><span style='font-family:SimSun'>&#36890;&#36807;&#33258;&#24049;&#25968;&#32452;&#20256;&#36882;&#25968;&#25454;&#65292;&#22240;&#27492;&#25968;&#25454;&#35201;&#36716;&#25442;&#20026;&#23383;&#33410;&#25968;&#32452;&#12290;&#20854;&#20013;&#30340;&#23458;&#25143;&#26426;&#21644;&#26381;&#21153;&#22120;&#20043;&#38388;&#36890;&#20449;&#30340;&#21629;&#20196;&#26159;&#33258;&#23450;&#20041;&#30340;&#23383;&#31526;&#20018;&#65292;&#25351;&#23450;&#20855;&#20307;&#30340;&#25805;&#20316;&#26041;&#27861;&#65292;&#22914;&#65306;</span><span
lang=EN-US>CONNECT</span><span style='font-family:SimSun'>&#34920;&#31034;&#36830;&#25509;&#65292;</span><span
lang=EN-US>JOIN</span><span style='font-family:SimSun'>&#34920;&#31034;&#21152;&#20837;&#32842;&#22825;&#65292;&#21482;&#35201;&#23458;&#25143;&#31471;&#21644;&#26381;&#21153;&#22120;&#37117;&#35748;&#35782;&#23601;&#21487;&#20197;&#12290;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>class Data</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>{</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; //</span><span
style='font-family:SimSun'>&#40664;&#35748;&#26500;&#36896;&#22120;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;
public Data()</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; {</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
this.cmdCommand = Command.Null;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
this.strMessage = null;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
this.strName = null;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; }</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; //</span><span
style='font-family:SimSun'>&#25968;&#25454;&#26684;&#24335;&#36716;&#25442;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;
public Data(byte[] data)</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; {</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
//</span><span style='font-family:SimSun'>&#21069;</span><span lang=EN-US>4</span><span
style='font-family:SimSun'>&#20010;&#23383;&#33410;&#23384;&#20648;&#21629;&#20196;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
this.cmdCommand = (Command)BitConverter.ToInt32(data, 0);</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
//</span><span style='font-family:SimSun'>&#21518;&#32493;</span><span
lang=EN-US>4</span><span style='font-family:SimSun'>&#20010;&#23383;&#33410;&#23384;&#20648;&#21517;&#31216;&#38271;&#24230;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
int nameLen = BitConverter.ToInt32(data, 4);</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
//</span><span style='font-family:SimSun'>&#21518;&#32493;</span><span
lang=EN-US>4</span><span style='font-family:SimSun'>&#20010;&#23383;&#33410;&#23384;&#20648;&#28040;&#24687;&#38271;&#24230;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
int msgLen = BitConverter.ToInt32(data, 8);</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
//</span><span style='font-family:SimSun'>&#21028;&#26029;&#21517;&#31216;&#26159;&#21542;&#23384;&#22312;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
if (nameLen &gt; 0)</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
this.strName = Encoding.UTF8.GetString(data, 12, nameLen);</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
else</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
this.strName = null;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
//</span><span style='font-family:SimSun'>&#26816;&#26597;&#20449;&#24687;&#25968;&#25454;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
if (msgLen &gt; 0)</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
this.strMessage = Encoding.UTF8.GetString(data, 12 + nameLen, msgLen);</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
else</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
this.strMessage = null;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; }</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; //</span><span
style='font-family:SimSun'>&#36716;&#25442;&#25968;&#25454;&#32467;&#26500;&#21040;&#25968;&#32452;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;
public byte[] ToByte()</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; {</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;List&lt;byte&gt; result = new List&lt;byte&gt;();</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
//</span><span style='font-family:SimSun'>&#21629;&#20196;&#37096;&#20998;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
result.AddRange(BitConverter.GetBytes((int)cmdCommand));</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
//</span><span style='font-family:SimSun'>&#21517;&#31216;&#38271;&#24230;&#37096;&#20998;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
if (strName != null)</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
result.AddRange(BitConverter.GetBytes(strName.Length));</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
else</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;result.AddRange(BitConverter.GetBytes(0));</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
//</span><span style='font-family:SimSun'>&#28040;&#24687;&#38271;&#24230;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
if (strMessage != null)</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
result.AddRange(BitConverter.GetBytes(strMessage.Length));</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
else</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
result.AddRange(BitConverter.GetBytes(0));</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
//</span><span style='font-family:SimSun'>&#28155;&#21152;&#21517;&#31216;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
if (strName != null)</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
result.AddRange(Encoding.UTF8.GetBytes(strName));</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
//</span><span style='font-family:SimSun'>&#28155;&#21152;&#20449;&#24687;&#20869;&#23481;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
if (strMessage != null)</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
result.AddRange(Encoding.UTF8.GetBytes(strMessage));</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
return result.ToArray();</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; }</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; //</span><span
style='font-family:SimSun'>&#23458;&#25143;&#31471;&#30331;&#38470;&#21517;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; public
string strName;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; //</span><span
style='font-family:SimSun'>&#20449;&#24687;&#20869;&#23481;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;
public string strMessage;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; //</span><span
style='font-family:SimSun'>&#21629;&#20196;&#31867;&#22411;</span><span
lang=EN-US>(login, logout, send message, </span><span style='font-family:SimSun'>&#31561;&#31561;</span><span
lang=EN-US>)</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;
public Command cmdCommand;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>}</span></p>

<h3 style='margin-top:6.0pt;margin-right:0cm;margin-bottom:6.0pt;margin-left:
0cm'><a name="_Toc239234800"></a><a name="_Toc240797507"></a><a
name="_Toc240800590"></a><span
 lang=EN-US>20.2.3</span><span lang=EN-US>&nbsp; TCP Server</span></h3>

<p class=2 style='margin-bottom:3.0pt;text-indent:20.0pt'><span
style='font-family:SimSun'>&#26381;&#21153;&#22120;&#31471;&#20027;&#35201;&#26159;&#30417;&#21548;&#22320;&#22336;&#21644;&#31471;&#21475;&#65292;&#31561;&#24453;&#23458;&#25143;&#31471;&#21457;&#36865;&#28040;&#24687;&#12290;&#23458;&#25143;&#31471;&#36830;&#25509;&#21040;&#26381;&#21153;&#22120;&#24182;&#21152;&#20837;&#32842;&#22825;&#23460;&#12290;&#23458;&#25143;&#31471;&#21457;&#36865;&#20449;&#24687;&#21040;&#26381;&#21153;&#22120;&#65292;&#26381;&#21153;&#22120;&#20877;&#21457;&#36865;&#32473;&#20854;&#20182;&#20154;&#12290;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>//ClientInfo </span><span
style='font-family:SimSun'>&#32467;&#26500;&#23384;&#20648;&#24517;&#35201;&#30340;&#20449;&#24687;</span>
</p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>struct ClientInfo</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>{</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; //</span><span
style='font-family:SimSun'>&#23458;&#25143;&#31471;</span><span lang=EN-US>
Socket </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;
public Socket socket;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; //</span><span
style='font-family:SimSun'>&#29992;&#25143;&#36134;&#25143;&#20449;&#24687;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;
public string strName;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>}</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>//</span><span
style='font-family:SimSun'>&#23458;&#25143;&#31471;&#30331;&#38470;&#35760;&#24405;&#38598;&#21512;</span>
</p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>ArrayList clientList;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>//</span><span
style='font-family:SimSun'>&#26381;&#21153;&#22120;&#31471;&#20027;&#22871;&#25509;&#23383;&#30417;&#21548;&#23545;&#35937;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>Socket serverSocket;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>byte[] byteData = new
byte[1024];</span></p>

<p class=2 style='margin-top:3.0pt;margin-right:0cm;margin-bottom:3.0pt;
margin-left:0cm;text-indent:20.0pt'><span style='font-family:SimSun'>&#20197;&#19979;&#20195;&#30721;&#35828;&#26126;&#22914;&#20309;&#21551;&#21160;&#23458;&#25143;&#31471;&#30417;&#21548;&#24182;&#25509;&#25910;&#36827;&#20837;&#30340;&#35831;&#27714;&#65306;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>private void Form1_Load(object
sender, EventArgs e)</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>{</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; try</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; {</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
serverSocket = new Socket(AddressFamily.InterNetwork,SocketType.Stream,
ProtocolType.Tcp);</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
IPEndPoint ipEndPoint = new IPEndPoint(IPAddress.Any, 1000);</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
//</span><span style='font-family:SimSun'>&#32465;&#23450;&#30417;&#21548;&#21040;&#25351;&#23450;&#30340;</span><span
lang=EN-US>IP</span><span style='font-family:SimSun'>&#22320;&#22336;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
serverSocket.Bind(ipEndPoint);</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
serverSocket.Listen(4);</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
//</span><span style='font-family:SimSun'>&#25509;&#25910;&#36755;&#20837;&#35831;&#27714;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
serverSocket.BeginAccept(new AsyncCallback(OnAccept), null);</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; }</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; catch
(Exception ex)</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; { </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
MessageBox.Show(ex.Message, &quot;Sserver&quot;, MessageBoxButtons.OK, MessageBoxIcon.Error);
</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; }</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>}</span></p>

<p class=2 style='margin-top:3.0pt;text-indent:20.0pt'><span style='font-family:
SimSun'>&#20351;&#29992;</span><span lang=EN-US>IPAddress.Any</span><span
style='font-family:SimSun'>&#65292;&#25105;&#20204;&#21046;&#23450;&#25152;&#26377;&#26377;&#25928;&#30340;&#23458;&#25143;&#31471;&#35831;&#27714;&#12290;&#20063;&#21487;&#20197;&#20351;&#29992;</span><span
lang=EN-US>IPAddress.Parse (&#8220;192.168.1.1&#8220;) </span><span
style='font-family:SimSun'>&#26469;&#21046;&#23450;&#29305;&#23450;&#30340;</span><span
lang=EN-US>IP</span><span style='font-family:SimSun'>&#22320;&#22336;&#65292;&#36825;&#26679;&#23601;&#21482;&#26159;&#30417;&#21548;&#26469;&#33258;&#36825;&#20010;</span><span
lang=EN-US>IP</span><span style='font-family:SimSun'>&#22320;&#22336;&#30340;&#35831;&#27714;&#12290;</span></p>

<p class=2 style='margin-bottom:3.0pt;text-indent:20.0pt'><span
style='font-family:SimSun'>&#20197;&#19979;&#20195;&#30721;&#23454;&#29616;&#23545;</span><span
lang=EN-US> OnAccept </span><span style='font-family:SimSun'>&#26041;&#27861;&#30340;&#21709;&#24212;&#12290;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>private void
OnAccept(IAsyncResult ar)</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>{</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; try</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; {</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Socket clientSocket = serverSocket.EndAccept(ar);</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
//</span><span style='font-family:SimSun'>&#21551;&#21160;&#30417;&#21548;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
serverSocket.BeginAccept(new AsyncCallback(OnAccept), null);</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
//</span><span style='font-family:SimSun'>&#19968;&#26086;&#23458;&#25143;&#31471;&#36830;&#25509;&#21040;&#26381;&#21153;&#22120;&#65292;&#21017;&#33719;&#21462;&#21629;&#20196;&#20449;&#24687;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
clientSocket.BeginReceive(byteData, 0, byteData.Length, SocketFlags.None, new
AsyncCallback(On Receive), clientSocket);</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; }</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; catch
(Exception ex)</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; { </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
MessageBox.Show(ex.Message, &quot;Server&quot;, MessageBoxButtons.OK,
MessageBoxIcon.Error); </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; }</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>}</span></p>

<p class=2 style='margin-top:3.0pt;text-indent:20.0pt'><span lang=EN-US>EndAccept</span><span
style='font-family:SimSun'>&#36820;&#22238;&#23458;&#25143;&#31471;&#36830;&#25509;&#23545;&#35937;&#12290;&#25105;&#20204;&#21487;&#20197;&#21551;&#21160;&#30417;&#21548;&#65292;&#30417;&#21548;&#26469;&#33258;&#23458;&#25143;&#31471;&#30340;&#21508;&#31181;&#35831;&#27714;&#12290;</span></p>

<p class=2 style='text-indent:20.0pt'><span style='font-family:SimSun'>&#20351;&#29992;</span><span
lang=EN-US>BeginReceive</span><span style='font-family:SimSun'>&#26469;&#33719;&#21462;&#23458;&#25143;&#31471;&#21457;&#36865;&#30340;&#25968;&#25454;&#12290;</span></p>

<p class=ad style='margin-top:4.5pt;margin-right:0cm;margin-bottom:4.5pt;
margin-left:0cm;text-indent:20.0pt'><span style='font-family:SimHei'>&#27880;&#24847;&#65306;</span><span
style='font-family:KaiTi_GB2312'>&#38656;&#35201;&#20256;&#36882;</span><span
lang=EN-US>clientSocket</span><span style='font-family:KaiTi_GB2312'>&#21442;&#25968;&#21040;</span><span
lang=EN-US>BeginReceive</span><span style='font-family:KaiTi_GB2312'>&#12290;</span><span
lang=EN-US> AsyncCallback OnReceive </span><span style='font-family:KaiTi_GB2312'>&#36890;&#36807;</span><span
lang=EN-US>AsyncState</span><span style='font-family:KaiTi_GB2312'>&#23646;&#24615;&#33719;&#21462;&#23545;&#35937;&#65292;&#28982;&#21518;&#22788;&#29702;&#23458;&#25143;&#31471;&#35831;&#27714;&#12290;</span></p>

<h3 style='margin-top:6.0pt;margin-right:0cm;margin-bottom:6.0pt;margin-left:
0cm'><a name="_Toc239234801"></a><a name="_Toc240797508"></a><a
name="_Toc240800591"></a><span
 lang=EN-US>20.2.4</span><span lang=EN-US>&nbsp; TCP Client</span></h3>

<p class=2 style='margin-bottom:3.0pt;text-indent:20.0pt'><span
style='font-family:SimSun'>&#19979;&#38754;&#30340;&#20195;&#30721;&#20026;&#23458;&#25143;&#31471;&#23454;&#29616;&#20195;&#30721;&#30340;&#27010;&#35201;&#35828;&#26126;&#12290;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>//</span><span
style='font-family:SimSun'>&#23458;&#25143;&#31471;&#20027;&#22871;&#25509;&#23383;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>public Socket
clientSocket;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>//</span><span
style='font-family:SimSun'>&#30331;&#24405;&#21517;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>public string strName;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>private byte[] byteData
= new byte[1024];</span></p>

<p class=2 style='margin-top:3.0pt;margin-right:0cm;margin-bottom:3.0pt;
margin-left:0cm;text-indent:20.0pt'><span style='font-family:SimSun'>&#39318;&#20808;&#65292;&#23458;&#25143;&#31471;&#35201;&#36830;&#25509;&#21040;&#26381;&#21153;&#22120;&#12290;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>try</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>{</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; clientSocket
= new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;
IPAddress ipAddress = IPAddress.Parse(txtServerIP.Text);</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;
IPEndPoint ipEndPoint = new IPEndPoint(ipAddress, 1000);</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; //</span><span
style='font-family:SimSun'>&#36830;&#25509;&#21040;&#26381;&#21153;&#22120;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;
clientSocket.BeginConnect(ipEndPoint, new AsyncCallback(OnConnect), null);</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>}</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>catch (Exception ex)</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>{ </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;
MessageBox.Show(ex.Message, &quot;client&quot;, MessageBoxButtons.OK,
MessageBoxIcon.Error); </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>}</span></p>

<p class=2 style='margin-top:3.0pt;margin-right:0cm;margin-bottom:3.0pt;
margin-left:0cm;text-indent:20.0pt'><span style='font-family:SimSun'>&#19968;&#26086;&#36830;&#25509;&#25104;&#21151;&#65292;&#23601;&#21487;&#20197;&#30331;&#38470;&#24182;&#21457;&#36865;&#20449;&#24687;&#12290;&#28982;&#21518;&#65292;&#21487;&#20197;&#25353;&#29031;&#23458;&#25143;&#31471;&#21517;&#31216;&#22312;&#32842;&#22825;&#23460;&#20013;&#21015;&#20986;&#20449;&#24687;&#12290;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>//</span><span
style='font-family:SimSun'>&#36890;&#36807;&#29992;&#25143;&#21517;&#24191;&#25773;&#20449;&#24687;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>private void
btnSend_Click(object sender, EventArgs e)</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>{</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; try</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; {</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
//</span><span style='font-family:SimSun'>&#22635;&#20805;&#35201;&#21457;&#36865;&#30340;&#20449;&#24687;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Data msgToSend = new Data();</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
msgToSend.strName = strName;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
msgToSend.strMessage = txtMessage.Text;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
msgToSend.cmdCommand = Command.Message;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
byteData = msgToSend.ToByte();</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
//</span><span style='font-family:SimSun'>&#21457;&#36865;&#21040;&#26381;&#21153;&#22120;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
clientSocket.BeginSend (byteData, 0,byteData.Length, SocketFlags.None,new
AsyncCallback (OnSend), null);</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
txtMessage.Text = null;</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; }</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; catch
(Exception)</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp; {</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US style='letter-spacing:
-.2pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MessageBox.Show(&quot;</span><span
style='font-family:SimSun;letter-spacing:-.2pt'>&#26080;&#27861;&#21457;&#36865;</span><span
lang=EN-US style='letter-spacing:-.2pt'>&quot;, &quot;</span><span
style='font-family:SimSun;letter-spacing:-.2pt'>&#38169;&#35823;</span><span
lang=EN-US style='letter-spacing:-.2pt'> &quot; + strName,MessageBoxButtons.OK,
MessageBoxIcon.Error);</span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;
}&nbsp; </span></p>

<p class=a style='margin-left:20.0pt'><span lang=EN-US>}</span></p>

<p class=2 style='margin-top:3.0pt;text-indent:20.0pt'><span style='font-family:
SimSun'>&#29992;&#25143;&#36755;&#20837;&#30340;&#20449;&#24687;&#20316;&#20026;&#21629;&#20196;&#20256;&#36882;&#32473;&#26381;&#21153;&#22120;&#65292;&#26381;&#21153;&#22120;&#20250;&#21457;&#36865;&#20449;&#24687;&#21040;&#25152;&#26377;&#20854;&#20182;&#32842;&#22825;&#23460;&#20013;&#30340;&#29992;&#25143;&#30340;&#23458;&#25143;&#31471;&#19978;&#12290;&#21516;&#26679;&#65292;&#23545;&#20110;&#25509;&#25910;&#20449;&#24687;&#26469;&#35828;&#65292;&#20449;&#24687;&#19982;&#29992;&#25143;&#21517;&#23545;&#24212;&#12290;</span></p>

</div>

<div>

<hr class=msocomoff align=left size=1 width="33%">

<div>

<div id="_com_1" class=msocomtxt language=JavaScript
onmouseover="msoCommentShow('_anchor_1','_com_1')"
onmouseout="msoCommentHide('_com_1')"><a name="_msocom_1"></a>

<p class=MsoCommentText style='text-indent:21.0pt'><span
class=MsoCommentReference><span lang=EN-US style='font-size:10.5pt'>&nbsp;<a
href="#_msoanchor_1" class=msocomoff><font face=&#23435;&#20307;>[&#38632;&#26519;&#26408;&#39118;1]</font></a></span></span><span
style='font-family:SimSun'>&#26159;&#21542;&#26377;&#35823;</span></p>

<p class=MsoCommentText style='text-indent:20.0pt'><span style='font-family:
SimSun'>&#26080;&#35823;&#65281;</span></p>

</div>

</div>

<div>

<div id="_com_2" class=msocomtxt language=JavaScript
onmouseover="msoCommentShow('_anchor_2','_com_2')"
onmouseout="msoCommentHide('_com_2')"><a name="_msocom_2"></a>

<p class=MsoCommentText style='text-indent:21.0pt'><span
class=MsoCommentReference><span lang=EN-US style='font-size:10.5pt'>&nbsp;<a
href="#_msoanchor_2" class=msocomoff><font face=&#23435;&#20307;>[&#38632;&#26519;&#26408;&#39118;2]</font></a></span></span><span
style='font-family:SimSun'>&#25551;&#36848;&#19981;&#23436;&#25972;</span></p>

<p class=MsoCommentText style='text-indent:20.0pt'><span style='font-family:
SimSun'>&#23558;&#25968;&#25454;&#24322;&#27493;&#21457;&#36865;&#21040;&#36830;&#25509;&#30340;</span><span
class=MsoCommentReference><span lang=EN-US style='font-size:10.5pt'>&nbsp;<a
href="#_msoanchor_2" class=msocomoff><font face=&#23435;&#20307;>[&#38632;&#26519;&#26408;&#39118;2]</font></a></span></span><span
style='font-family:SimSun'>&#30446;&#30340;&#22320;</span></p>

</div>

</div>

<div>

<div id="_com_3" class=msocomtxt language=JavaScript
onmouseover="msoCommentShow('_anchor_3','_com_3')"
onmouseout="msoCommentHide('_com_3')"><a name="_msocom_3"></a>

<p class=MsoCommentText style='text-indent:21.0pt'><span
class=MsoCommentReference><span lang=EN-US style='font-size:10.5pt'>&nbsp;<a
href="#_msoanchor_3" class=msocomoff><font face=&#23435;&#20307;>[&#38632;&#26519;&#26408;&#39118;3]</font></a></span></span><span
style='font-family:SimSun'>&#25551;&#36848;&#19981;&#23436;&#25972;</span></p>

<p class=a4 align=left style='margin-top:1.5pt;margin-right:0cm;margin-bottom:
1.5pt;margin-left:1.0pt;text-align:left'><span style='font-family:SimSun'>&#32467;&#26463;&#25346;&#36215;&#30340;&#12289;&#20174;&#29305;&#23450;&#32456;&#32467;&#28857;&#36827;&#34892;&#24322;&#27493;&#35835;&#21462;&#30340;&#25805;&#20316;&#12290;</span><span
class=MsoCommentReference><span lang=EN-US style='font-size:10.5pt'>&nbsp;<a
href="#_msoanchor_3" class=msocomoff><font face=&#23435;&#20307;>[&#38632;&#26519;&#26408;&#39118;3]</font></a></span></span></p>

<p class=MsoCommentText style='text-indent:20.0pt'><span lang=EN-US>&nbsp;</span></p>

</div>

</div>

<div>

<div id="_com_4" class=msocomtxt language=JavaScript
onmouseover="msoCommentShow('_anchor_4','_com_4')"
onmouseout="msoCommentHide('_com_4')"><a name="_msocom_4"></a>

<p class=MsoCommentText style='text-indent:21.0pt'><span
class=MsoCommentReference><span lang=EN-US style='font-size:10.5pt'>&nbsp;<a
href="#_msoanchor_4" class=msocomoff><font face=&#23435;&#20307;>[&#38632;&#26519;&#26408;&#39118;4]</font></a></span></span><span
style='font-family:SimSun'>&#35828;&#26126;&#26159;&#31354;&#30340;</span></p>

<p class=MsoCommentText style='text-indent:20.0pt'><span style='font-family:
SimSun'>&#21028;&#26029;&#24403;&#21069;</span><span lang=EN-US> socket </span><span
style='font-family:SimSun'>&#30340;&#29366;&#24577;&#24773;&#20917;&#12290;</span></p>

</div>

</div>

<div>

<div id="_com_5" class=msocomtxt language=JavaScript
onmouseover="msoCommentShow('_anchor_5','_com_5')"
onmouseout="msoCommentHide('_com_5')"><a name="_msocom_5"></a>

<p class=MsoCommentText style='text-indent:21.0pt'><span
class=MsoCommentReference><span lang=EN-US style='font-size:10.5pt'>&nbsp;<a
href="#_msoanchor_5" class=msocomoff><font face=&#23435;&#20307;>[&#38632;&#26519;&#26408;&#39118;5]</font></a></span></span><span
style='font-family:SimSun'>&#25551;&#36848;&#19981;&#23436;&#25972;</span></p>

<p class=MsoCommentText style='text-indent:20.0pt'><span style='font-family:
SimSun'>&#23558;&#25968;&#25454;&#21457;&#36865;&#21040;&#36830;&#25509;&#30340;</span><span
class=MsoCommentReference><span lang=EN-US style='font-size:10.5pt'>&nbsp;<a
href="#_msoanchor_5" class=msocomoff><font face=&#23435;&#20307;>[&#38632;&#26519;&#26408;&#39118;5]</font></a></span></span><span
style='font-family:SimSun'>&#30446;&#30340;&#22320;</span></p>

</div>

</div>

<div>

<div id="_com_6" class=msocomtxt language=JavaScript
onmouseover="msoCommentShow('_anchor_6','_com_6')"
onmouseout="msoCommentHide('_com_6')"><a name="_msocom_6"></a>

<p class=MsoCommentText style='text-indent:21.0pt'><span
class=MsoCommentReference><span lang=EN-US style='font-size:10.5pt'>&nbsp;<a
href="#_msoanchor_6" class=msocomoff><font face=&#23435;&#20307;>[&#38632;&#26519;&#26408;&#39118;6]</font></a></span></span><span
style='font-family:SimSun'>&#26159;&#21542;&#26377;&#35823;</span></p>

<p class=MsoCommentText style='text-indent:20.0pt'><span style='font-family:
SimSun'>&#35831;&#20351;&#29992;</span><span lang=EN-US> WaitHandle.WaitOne </span><span
style='font-family:SimSun'>&#26041;&#27861;&#12290;</span></p>

</div>

</div>

<div>

<div id="_com_7" class=msocomtxt language=JavaScript
onmouseover="msoCommentShow('_anchor_7','_com_7')"
onmouseout="msoCommentHide('_com_7')"><a name="_msocom_7"></a>

<p class=MsoCommentText style='text-indent:21.0pt'><span
class=MsoCommentReference><span lang=EN-US style='font-size:10.5pt'>&nbsp;<a
href="#_msoanchor_7" class=msocomoff><font face=&#23435;&#20307;>[&#38632;&#26519;&#26408;&#39118;7]</font></a></span></span><span
style='font-family:SimSun'>&#26159;&#21542;&#26377;&#35823;</span></p>

<p class=MsoCommentText style='text-indent:20.0pt'><span style='font-family:
SimSun'>&#26080;&#35823;&#65281;</span></p>

</div>

</div>

</div>

</body>

</html>
